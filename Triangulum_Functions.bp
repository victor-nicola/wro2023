'*****************************************************************************************************************************************
'-----------------------------------------------------------------------------------------------------------------------------------------
'---------------------------------------------------------!/ANUNT_PUTERNIC/!--------------------------------------------------------------
'-----------------------------------------------------------------------------------------------------------------------------------------
'*****************************************************************************************************************************************(mama am si cuprins aicea esti nebun george bestia din valeni) e mare pacat ca randurile puse de tine o sa devina obsolete dupa ziua de maine in care o sa modificam functiile:) sa stii ca o  sa devina doar asa un reper. LOLOLOL nu am modifcat nimic si numerele nu corespund ðŸ’€ðŸ’€ðŸ’€ðŸ’€ 
'Fisierul respectiv este gandit pentru a stoca si organzia functiile echipei Triangulum 

'Functiile de calcul/decizionale - 92

'Functiile de citit culori - 178

'Functiile pentru mers fata/spate - 303

'Functiile pentru rotiri/mers la unghi - 1371

'Functiile de tip "subrutina" - 2321

'Functiile "ð‘´ð’‚ð’ð’„ð’‚ ð’Žð’Š ð’‚ð’Š ð’—ð’“ð’†ð’‹ð’– ð’Šð’”ð’Žð’‚ð’ð’‚" - 2807

' ! IMPORTANT1 ! : a se corecta numarul randului dupa fiecare manipualre a fisierului
' ! IMPORTANT2 ! : cine il modifica pe giga chad , mama lui este o femeie neserioasa
' ! IMPORTANT3 ! : ð“˜ ð“±ð“ªð“½ð“® ð“ªð“µð“µ ð“·ð“²ð“°ð“°ð“®ð“»ð“¼
'*****************************************************************************************************************************************
'-----------------------------------------------------------------------------------------------------------------------------------------
'--------------------------------------------------------------!/STOP/!-------------------------------------------------------------------
'-----------------------------------------------------------------------------------------------------------------------------------------
'*****************************************************************************************************************************************


'â£¿â£¿â£¿â¢¿â£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ£¿â£»â£Ÿâ¡¿â£½â£»â¡½â¢¯â¡¿â£½â£«â¡Ÿâ£½â£«â¢Ÿâ£½â¢«â¡Ÿâ£½â¢«â¡Ÿâ£­â¡»â£­â¢»â¡­â¢¯â¡½â£­â¢¯â¡½â£­â »â£œâ¡£â¢Ÿâ£œâ¡£â¢Ÿâ¡œâ££â¢›â¡œâ££â¢›â¡œâ££â¢â¡¼â£¡â¢â¡¼â£¡â¢â¡¼â£¡â¢â¡¼â¡±
'â£¿â£·â£»â£Ÿâ£¾â£³â¢¿â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ¡·â£¯â£Ÿâ¡·â£¯â¡½â£¯â¢·â£â¡·â£½â££â¢¯â£Ÿâ¢®â£¯â¢½â£šâ¡·â£¹â¢§â£»â¡œâ£§â£›â¢§â¡»â£œâ¢®â¡³â£­â¢»â¡”â£â¡³â¢Žâ¡â¢®â ¼â£±â¢«â ¼â£±â¢«â¡œâ¡±â¢Žâ ¶â¡±â¢Žâ ¶â¡±â¢Žâ ¶â¡±â¢Žâ ¶â£™
'â£¿â¢¿â£½â¡¾â£·â£Ÿâ£¯â¢¿â¡¾â£½â£»â¢¾â£½â£»â¢¾â£½â£»â¢¾â£½â£»â£žâ£¯â£Ÿâ£¾â£³â£Ÿâ£¾â£³â£Ÿâ£¾â£³â£Ÿâ£¾â£³â£Ÿâ£¾â£³â£Ÿâ£¾â£½â£»â¢¾â£½â£»â¢¾â£½â¢¾â£¯â¢·â£Ÿâ£¾â£³â£Ÿâ£¾â£³â£Ÿâ£¾â£³â£Ÿâ£¾â£³â¢¯â£Ÿâ¡·â¢¯â£Ÿâ¡·â£»â£µâ¡»â£¾â£±â¢·â£«â ·â£žâ¢¯â¡žâ£§â¢Ÿâ¡¼â£â¢·â££â¢Ÿâ¡µâ£«â¢žâ¡½â£Žâ¢·â¡¹â£žâ¢£â¡žâ£±â¢­â¡›â¡¼â£™â¡žâ£¥â£‹â¢—â££â ³â£œâ¡¹â¢Žâ¡³â£™â¢Žâ¡³â£™â¢Žâ¡³â£™â¢®â¡¹â£’
'â£¿â£¯â£·â¢¿â£³â£¯â£Ÿâ£¯â¡¿â£½â¢¯â£¿â¢¾â£½â£»â¢¾â£½â£»â£žâ¡·â£¯â¢·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â¢¯â£·â£Ÿâ¡¿â£žâ¡¿â£žâ£¯â¡¿â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£¾â£½â£¿â£¾â£¿â£¿â£¾â£¿â£·â£¿â£·â£¯â£Ÿâ£¾â£­â¢¿â¡¹â£¾â£¹â¢®â£â¢·â£«â¢žâ¡µâ£«â¢·â¡¹â£Žâ¢·â¡¹â£Žâ ·â¡­â¢®â¡•â£â ¶â£¹â¢±â¢£â žâ¡´â£©â žâ¡´â£‹â ¶â£™â¢®â¡±â£â¢®â¡±â£â¢®â¡±â¡â¢¶â£‘â¢£
'â£¿â¡¾â£½â¡¿â£½â¡¾â£½â£³â¡¿â£¯â£Ÿâ£¾â£»â¢¾â£½â£»â£žâ¡·â£¯â¢¿â¡½â£¯â£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â¢¾â¡½â£Ÿâ£¾â£½â£»â¡½â£Ÿâ£¯â£·â£¿â£¿â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â£§â£›â¡¾â£¼â¢£â¡Ÿâ£®â¢³â¡â£®â¢³â¡â£®â ³â£­â¢›â¡¼â¢£â¢žâ¡¬â¡³â£â¢Žâ¢§â¡›â¡´â¢£â¡›â¡´â£â¢žâ¡±â¢Žâ¡µâ£Šâ ¶â¡±â¢Žâ¡–â£±â¡™â¢¦â¡â¡–
'â£¿â£»â£½â£Ÿâ¡·â£Ÿâ£¯â¡·â£Ÿâ¡·â£¯â¢·â£»â£Ÿâ£¾â£³â¢¯â¡¿â£½â¢¯â£Ÿâ¡·â£¯â¢·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â¢¾â¡½â£¯â£Ÿâ£¯â¡·â£¯â£·â£Ÿâ£¯â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¾â£µâ£«â¢žâ¡µâ£â¢¾â¡±â¢¯â¡žâ¡µâ£›â¢¦â£›â¡¼â£â ¾â£°â ³â¡œâ£Žâ ¶â¡¹â£œâ¢£â¡â¡²â£â¢®â¡±â¢«â ´â£©â žâ£¡â ³â¡œâ¡¥â£šâ¢¥â¡šâ¡œ
'â£¿â£½â£³â£¯â£Ÿâ£¯â¡·â£Ÿâ£¯â¢¿â¡½â£¯â¢·â£»â¢¾â¡½â£¯â¢¿â£½â£»â¢¾â£½â£»â¢¯â£·â£»â£žâ£·â£»â£žâ£·â£»â£žâ£·â£»â¢¾â¡½â£¯â¢¿â¡½â£žâ£¯â¢¿â£³â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£žâ¡½â¢®â¡â£§â¡›â£µâ¡©â¢–â££â žâ£¬â ³â£¥â¢›â¡¼â£Œâ¢³â¡±â¢Žâ¢§â¡šâ¡µâ£Šâ ¶â£‰â¢§â¢›â¡¤â£›â ´â£‹â ¼â¡±â¡œâ£†â¢§â¡™
'â£¿â¢¾â£½â¡¾â£½â£³â£Ÿâ£¯â£Ÿâ£¯â¢¿â¡½â£¯â£Ÿâ£¯â¢¿â£½â£»â¢¾â£½â£»â¢¾â£½â£»â¡žâ£·â£»â£žâ£·â£»â£žâ£·â£»â¢¾â¡½â£¯â¢¿â¡½â£¯â£Ÿâ£¯â£Ÿâ£¯â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â££â¢Ÿâ ¶â£™â¢¦â¡›â¡µâ¢ªâ¡â¢¦â¡›â¡´â£‹â ¶â£©â¢–â¡¹â¢Žâ ¶â¡¹â ´â£©â žâ¡±â¢Žâ¡£â žâ¡´â¢‹â¡¼â£¡â £â¡µâ£ˆâ ¦â£™
'â£¿â¢¯â£·â£Ÿâ£¯â¡·â£¯â£·â£»â£žâ£¯â£Ÿâ£·â£»â£žâ¡¿â£¾â£½â£»â¢¾â¡½â£»â¡žâ£·â¡»â¢·â£›â£¾â£³â£Ÿâ£¾â£³â£¯â¡¿â£½â¢¯â¡¿â£½â£³â£Ÿâ¡¾â£½â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡Ÿâ£Ÿâ£¿â¢»â¡½â¢ºâ¡â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£Žâ¢¯â¡¹â£†â »â£œâ¢£â žâ£¥â¢›â¡´â£©â¢žâ¡±â¢Žâ¡µâ¢‹â¡žâ£±â¢‹â ¶â£‰â ·â¡©â¢žâ¡±â£˜â £â¢–â¡¡â¢“â¡´â£‰â –â£¡
'â£¿â£»â¢·â£»â¡¾â£½â¢·â£¯â¢·â£»â¢¾â¡½â£žâ¡·â£¯â£Ÿâ£·â£³â¢¯â£Ÿâ¢¾â£³â¢Ÿâ£³â£Ÿâ£¯â£Ÿâ£¾â£³â¡½â£žâ¡·â£¯â¢¿â¡½â£¯â£Ÿâ£·â£»â£žâ£¿â£¿â£¿â¡Ÿâ¢¥â ²â¡â£¾â£Ÿâ£¿â£¿â£»â£¿â£Ÿâ£¿â£¯â¢¿â£žâ£·â£»â£½â£šâ ·â£˜â¢§â¡šâ¡•â¢¦â¢«â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£²â¢£â¡­â¢³â¢¬â¢£â¡›â¡´â£‹â ¶â¡±â¢Žâ¡µâ¢‹â¡œâ££â žâ¡¥â¢«â¡œâ¡±â¢Žâ¡±â¢Žâ ´â¢£â¡™â¢¦â¡™â¢¦â ±â£Œâ šâ¡¤
'â£¿â£½â£»â¢·â£»â¢¯â£Ÿâ¡¾â£¯â£Ÿâ£¯â¢¿â£½â£»â¢·â£»â¢®â£½â£³â¢¯â£»â£­â¡Ÿâ£·â£žâ£³â£žâ¡·â£¯â¢¿â¡½â£½â£â£¯â£Ÿâ£·â£»â£žâ£·â£»â£¿â£¿â «â „â£‰â£³â£½â£¼â£¿â£¿â£¿â¢¿â£Ÿâ£¿â¢¯â£Ÿâ¡¿â£žâ£·â¡³â¢žâ¡œâ¢¢â â¡–â¡©â¢žâ¡¥â£›â£žâ£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â¢£â¢žâ¡±â¢Žâ¢§â¡™â¢¶â¡©â¢žâ¡±â£‹â ¶â£©â žâ£¡â žâ£±â £â¡œâ¡±â¢Šâ –â¡©â¢Žâ¡±â¡˜â ¦â¡‘â¢Žâ¡±â¢Œâ¡“â¡”
'â£¿â¢¾â£½â£»â£¯â¢¿â£½â£»â¢·â£»â£žâ£¯â¢·â¡¯â£Ÿâ£žâ¡¿â£¼â¢â£¯â¢·â£³â£»â£³â£žâ¢·â£«â£Ÿâ¡·â£¯â£Ÿâ¢·â£»â¢®â¡½â£žâ£·â¡»â£žâ£¿â£¿â â ³â¢¾â£§â£½â£žâ£¿â£¿â£·â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â£¿â¡â£®â¢žâ¡³â£Žâ ³â¡µâ¢Šâ¡´â¢»â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡‡â¢®â ³â£â ¶â£™â¢¦â¡™â£Žâ µâ£Šâ —â¡±â¢Žâ¡±â£Šâ ¥â¡“â£¬â¢±â¡‰â¢Žâ¡±â¢Šâ ´â£¡â £â£™â ¢â¡‘â ¦â¡±â¢Œ
'â£¿â¢¯â£Ÿâ¡·â£¯â£Ÿâ£¾â¡½â£¯â¢·â£»â£žâ£¯â£½â£»â£¼â£›â£¾â£›â¡¾â£â¡·â£â¡·â£žâ£¯â¢·â¢¯â¡½â£¶â¢¯â£›â£§â¢¿â¡½â£³â¢¾â£½â£»â£¿â ƒâ¢‰â¡·â£¿â£¹â¢¯â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â£¯â¡¿â£¯â¢Ÿâ¡žâ£žâ¡³â£œâ£«â¡‘â ³â ¾â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢Œâ¡³â¢¬â¢³â¡©â¢–â¡¹â¡¸â¡œâ¡¡â¢â¡•â¢Žâ¡±â£‰â –â¡±â¢¢â ±â¡˜â ¦â¡‘â£â ²â¢„â ³â£„â¢£â¡™â¢†â¡±â¢Š
'â£¿â£¯â¢¿â¡½â£·â£»â£žâ¡¿â£½â¢¯â£·â£»â¢®â¢·â£³â£³â ¿â£œâ£¯â¢·â£â¡¿â£½â£¹â¢¯â£žâ£¯â¢¯â£Ÿâ¡¾â£½â£›â£¾â£«â¡½â¢¯â£·â£«â£¿â¡Ÿâ¢ â£¯â£„â¢¿â£¿â£¿â£¿â¡§â£Ÿâ£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¶â¡±â¢¦â¡â¢³â¡’â ¦â¡„â ›â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£Žâ¡±â£‹â ¶â£™â¢Žâ¡µâ¢±â ±â£™â ²â¡˜â¢Žâ¡±â¢Œâ¢Žâ¡‘â¢£â ±â£¡â¢£â¡‘â ¦â¡™â£Œâ¢ƒâ¢†â £â¡œâ ¢â£…â £
'â£¿â£žâ£¿â¡½â£·â¢¯â¡¿â£½â£»â£Ÿâ¡¶â£¯â¢Ÿâ£¯â£—â¡¯â£¿â ½â£žâ£¯â¢¾â£â¡§â£Ÿâ¡§â¢¿â£œâ¡¯â¢¾â¡½â£žâ¡½â£¶â¢â£¿â£›â¡¶â£¯â£¿â ‡â ¿â¢±â£¿â¢¸â£¿â£¿â£¡â£·â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â£Žâ §â¡â¢²â ±â£Œâ¡ â¢˜â »â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£†â ³â£â¢žâ¡±â¢Žâ ´â£‹â¢œâ£¢â¡™â¡±â¢£â œâ¡Œâ ¦â£™â¢‚â ³â¡â ¦â£‘â¢£â ±â¡Œâ Žâ¡œâ¢¢â¡‘â¢£â †â¢£
'â£¿â¡¾â£½â£»â¡½â£¯â£Ÿâ£·â£»â ¾â£â£³â£Ÿâ£žâ¡¾â£½â¢žâ¡¿â£½â£ºâ£â£®â¡½â£žâ¡½â£â¡¾â£â£¯â ¾â£½â£¹â¢žâ£Ÿâ£®â¢¿â£±â¢¯â£¿â €â£â¡Šâ£¿â£§â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢¿â£¿â£¿â£¿â£œâ¢£â ·â¢¤â¡¡â ‰â †â£¹â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡Žâ¡µâ£Šâ¢®â¡±â¢â¡²â¢©â¡’â¢¤â¢£â¡‘â¢£â šâ¢¬â¡‘â¢¢â¢â ²â£‰â –â¡¡â¢Žâ ±â¡˜â¡œâ£ â £â£˜â¢‚â¢Žâ¡¡
'â£¿â¡½â£·â¢¯â£Ÿâ£·â£»â¢¾â£½â£»â¡½â£³â¢¾â£â¡¾â£­â¢¿â£¹â¢§â¢·â¢¾â£±â¡Ÿâ¡¾â£µâ¢â£·â¢»â¡¼â£»â¡µâ¢¯â£¾â£¹â¢®â£¯â£»â£¿â£§â£´â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£»â£¶â£­â¡žâ¢£â¢â£¬â¡±â¡Œâ¢’â¡ â¢¹â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡œâ¢²â â£¦â ±â¡Žâ¡œâ£¡â šâ¡”â¢¢â¡™â¢¢â¡™â¢¦â¡˜â¢¥â¢Šâ µâ¡¨â œâ¡â¢Žâ ±â¡â¢†â¡¡â¢’â¡¡â¢Šâ ´â¡
'â£¿â£³â£Ÿâ¡¾â£½â¢¯â£Ÿâ¡¾â£½â£«â¢·â£»â£žâ£½â£³â£›â£žâ¢¯â£žâ ¾â£¼â¢â£·â¡³â¡½â£žâ¡½â£žâ¢§â¡¿â£±â ¾â£­â¡Ÿâ¡¾â£½â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡Ÿâ£¿â¡¿â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â ¾â¢žâ¡©â£‡â £â Œâ¡‘â¢ºâ£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢Ÿâ£¿â£¿â£¿â¡‘â¢Žâ¡´â¢©â¡’â¢¥â £â£â ²â£‘â ªâ¡‘â¢Žâ¡±â¢¨â ±â¡Œâ¢šâ ¤â¢ƒâ ²â¡‘â¡Œâ¢†â “â¡Œâ¢ƒâ Žâ¡±â ˜â¡„â¢£
'â£¿â¡½â£žâ¡¿â£½â£»â¢¾â£½â£³â¢¯â£Ÿâ¡µâ£žâ£§â¢·â¡»â£¼â¢â£¾â¢»â¡½â£ºâ¢§â¢¿â£¹â¢¾â£¹â¡žâ£¯â ¾â£â¡¯â£—â¢¿â¡¿â£¿â£¿â£¿â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£–â£¿â¢¯â¢€â¢’â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£Ÿâ¡¶â¡·â£Žâ ·â£¤â¢“â¡’â£©â¢’â£¿â£¿â£¿â£¿â¡Ÿâ¡¹â ‹â¢´â£†â¡˜â£¿â£·â£â¢²â¡˜â¢¥â¡™â¢†â ³â£¨â ±â Œâ¡¥â£™â ¢â£…â £â¢ƒâ â¡†â £â â ¦â¡‘â Œâ¡Œâ ±â¡ˆâ †â¡œâ¢ â ƒâ¡œâ¢ 
'â£¿â¡½â£¯â£Ÿâ¡·â£¯â£Ÿâ¡¾â£µâ£»â ¾â£½â£»â¡¼â£³â¢â£·â¢»â¢®â£â¡·â£â¢¿â¡ºâ£½â£šâ£§â¢Ÿâ£§â¢¿â£¹â¢¾â£¹â¢¾â£¹â¢Ÿâ¡¿â¢¥â£¼â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢³â šâ¡¼â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢»â£­â¡›â ¿â¡µâ£‰â žâ£©â ³â¢¦â¡€â¢Žâ£½â£¿â£¿â£¿â£‡â¢ â£…â ®â ¿â¢¿â ¿â£¿â£—â ¦â£™â¢¢â¡™â£Œâ ³â£„â «â¡œâ¡°â¢¡â £â¡”â¢©â¢Šâ œâ¡°â¢©â ˜â¡°â¢â žâ¡„â¢£â ‘â¡Œâ ”â¡¡â¢Šâ ”â¡¡
'â£¿â£½â£³â£¯â£Ÿâ¡·â£¯â£Ÿâ£³â£½â¢»â£³â£­â ·â£â£Ÿâ¡®â£Ÿâ¡½â¢®â£—â¢¯â¡¯â¢·â¡³â£â£¾â¢«â£žâ£³â¢¯â¢¾â£¹â¡žâ£½â¡žâ£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡­â£‡â¡‹â¡”â¢»â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£›â¢®â¡“â¢¦â¡™â£·â¡³â£¬â£¦â¢¥â¡›â£¤â¡™â£¦â£¿â£¿â£¿â£¿â£â£¿â¢¸â£¿â£¿â£¿â£¿â£¾â£¿â¡œâ£Œâ £â£œâ °â¢£â¢Œâ¡±â¢¢â¢™â£‚â ³â¢Œâ¡¡â Žâ¢†â¡‘â¢¢â ¡â¡‘â¢Šâ ´â¡ˆâ¢†â ±â£ˆâ ’â¡¡â Žâ¡°â¢
'â£¿â£žâ£·â£»â¢¾â£½â£³â¢¯â£·â¢«â£¯â¢·â£šâ£¯â¡½â£žâ¡µâ£¯â¢½â¡»â£¼â£›â ¾â£¯â¢½â¡³â£½â¢»â¡¼â£½â¡ºâ£â¡·â£½â¢£â£Ÿâ¡žâ£¿â£¾â£¥â£¿â£¿â£¿â£¯â£¿â¡³â¢·â¡ˆâ¡‘â Œâ¢ â¡¸â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡½â£¶â£â¢â¡žâ£´â£™â£¦â¡¹â¢†â£¿â£´â£½â£¾â£¿â£¿â£¿â£¿â â¡»â¢·â¢©â£¿â£¿â£¿â£¿â£¿â¡—â£¨â ±â£Œâ ¹â£‚â Žâ¡”â¢£â¢Œâ ¢â¢ƒâ †â¢¢â â¢¢â ˜â¡„â¢£â ˜â£â ¢â¡‘â¢Œâ ¢â¡â¢Žâ °â¡â¢†â ¡
'â£¿â¢¾â£³â£¯â¢¿â¡¾â£½â£»â£¼â£»â¢žâ£½â£¹â¢¶â£»â¢¼â£»â¢¼â£³â¡»â£µâ£«â¢Ÿâ¡®â£—â£»â¡¼â£³â¡½â£–â£»â¡â£¾â¡±â£Ÿâ¢®â£½â¡Ÿâ¢»â£¿â£¿â£¿â£Ÿâ£¿â£¯â¢³â£¦â£·â£¶â£¿â£¿â¢¿â¢»â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¾â£¿â£¼â£†â¢³â£Žâ ¿â£–â£¾â£¿â£¾â£¿â£¿â£¿â£¿â£¿â¡€â£Ÿâ¢ˆâ£¦â£¹â£¿â£¿â¢¿â£¿â “â¡¤â¢“â£Œâ¢£â ±â¡Šâ¢œâ¡‚â¢Žâ¡±â¢Šâ¡œâ¢„â šâ¡„â¢£â ˜â¡„â¢ƒâ †â¡±â¢ˆâ †â¡±â¢ˆâ †â¡±â¢ˆâ „â¡ƒ
'â£¿â¢¯â£Ÿâ¡¾â£¯â£Ÿâ¡·â£¯â¢¶â£â£Ÿâ¡®â£—â£»â¡¼â£â¡¾â¡½â¢¶â¡»â£µâ¢«â£¾â¡¹â£žâ¡µâ£«â¢·â£¹â¢žâ¡µâ£»â¢–â£»â¡â£¾â£¿â â °â Ÿâ£¿â£¯â¢¸â£¿â£¯â¡§â£´â£ â£´â£¶â£¦â£„â£³â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£»â¢¿â£¿â£¿â£®â£·â£¾â£¿â£¿â£¯â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£Ÿâ ƒâ¢¿â£¿â Ÿâ£½â£¿â£¿â £â¡™â¡”â¢£â œâ£¢â £â¢â ¢â¡™â¢„â¢¢â ¡â¡˜â¢„â £â¡˜â¢„â £â¡˜â¢„â Šâ¡„â £â¡â¢„â ƒâ¡”â¢ â ƒâ¡Œâ¡
'â£¿â¢¯â¡¿â£½â£»â¢¾â¡½â¢¯â¡·â£žâ¢§â£Ÿâ£­â ·â£â¡¾â£±â ¿â£­â¢—â£¯â¢³â¡žâ£µâ¡»â£¼â£›â¢®â¡—â£¯â¡â£§â¡Ÿâ£§â¢»â¡žâ£¿â €â €â£¦â£¿â£¿â£´â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¶â£¹â¢¯â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£ â£›â£·â ¿â£«â£¾â¢ƒâ §â¡±â¡˜â¢¥â šâ£„â ³â£ˆâ ±â¡ˆâ¢†â ¢â¡‘â¢Œâ ¢â¡‘â¢Œâ ¢â¡‘â °â¡ˆâ¢†â ¡â¢ƒâ Œâ¡‚â œâ¡ â¢‚â …â¢¢â 
'â£¿â¢¯â£¿â£³â£Ÿâ£¯â£Ÿâ£¯â ·â£â¡¿â¡¼â£žâ¢¯â£»â ¼â£â£Ÿâ¢®â£»â¡œâ£¯â¢žâ£³â¡½â££â¢¯â£³â¢»â¡¼â£½â¢²â¡Ÿâ£¼â¡³â£â¢¿â£†â €â¢¿â£¿â£¿â£¿â£¯â£¿â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¼â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â ¶â¢Ÿâ£¿â¢…â ºâ¡°â¢¡â¡™â ¤â¢‹â ¤â “â¡„â¢£â ˜â¡„â¢£â ˜â¡„â¢£â ˜â ¤â¡‘â¢¨â ‘â Œâ¡„â¢ƒâ ¢â¡˜â „â¡ƒâ ”â£â Šâ¡„â¢ƒ
'â£¿â£»â£žâ¡·â£¿â¢®â¡½â£žâ£¿â¡»â£žâ¡½â£žâ¢¯â£³â¢»â¡â£®â¢Ÿâ¡¶â£»â¡â£žâ£§â¢»â¡µâ£«â£—â¢¯â£³â¡­â¢·â£«â¢·â¡¹â£Žâ¡¯â¢¿â£†â ˜â£»â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â¡€â¢€â¢»â¡¯â¢Œâ¢£â¡‘â¢§â ˜â¡¥â¢‹â Œâ¡“â¢Œâ ¢â¡‘â¢Œâ ¢â¡‘â¢Œâ ¢â¢‰â †â¢¡â ‚â¡œâ¡â¢Œâ ‚â¡…â ¢â¡‘â Œâ¢’â¡€â £â Œâ¡„
'â£¿â£³â¢¯â¡¿â£½â£â¡¿â£½â£²â¢Ÿâ¡½â£žâ£­â¢·â£«â¢Ÿâ¡¼â£â¡¾â£³â¢§â£›â¢·â¡ºâ£â¡¾â¡µâ£žâ¢¯â¡–â£¯â¡³â£â¡®â¢·â¡¹â£žâ£»â£¿â¡„â£¿â£¿â£¿â¡Ÿâ¢›â£«â£¿â£¿â£¿â£¿â£¿â£¿â Ÿâ£¿â ›â¢¿â£»â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£§â ¸â£¹â¡Ÿâ£Œâ ²â£¡â Šâ¡•â¢¢â ¡â¢šâ °â¡ˆâ –â¡¡â¢Šâ ”â ¡â¢‚â ±â¡ˆâ¢Œâ ‚â¡…â¢’â¡ˆâ¢„â £â¡â¢¡â ‚â¢â ‚â¡Œâ¢¡â ’â  
'â£¿â£½â£¯â£Ÿâ¡·â£¯â¢·â£³â¡½â¢¾â£¹â¡žâ¡½â£Žâ¡·â£«â¡½â£žâ¡µâ£›â£®â¢Ÿâ£®â¢½â££â¢Ÿâ£µâ¢«â¡¾â£¹â¢–â£¯â¢³â¡â£§â¢»â¡œâ£·â£¿â£¿â£¿â£¿â£¿â£´â£¿â¡¿â¡â¢»â£¿â£Ÿâ£¤â£½â£¶â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â  â¢šâ¡¯â£â £â¢†â ¹â£ â¢ƒâ £â¢Œâ ¢â¡‘â Œâ ´â¢â¢Šâ ±â¡ˆâ¢†â ˜â¡ â¢ƒâ¡˜â¢„â¡˜â¢„â ¢â¢‘â¢‚â ©â¢„â Šâ¡”â ¡â Œâ¡¡
'â£¿â£½â£³â£¯â£Ÿâ£·â£›â£¶â¢»â¡â£§â¡»â£â¢¾â£±â£â¢·â£¹â¢žâ¡½â£Žâ¢¿â¡œâ£§â£›â ¾â£œâ¢¯â£³â£›â ¾â£œâ¢§â¡»â£œâ¢§â¡»â£œâ£¿â£¿â£¿â£¿â£¿â£¿â¡Ÿâ ³â£¿â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â Œâ¡â¢«â¢„â «â¡œâ¢ â¢ƒâ Œâ¡’â¢Œâ ¢â¢‘â Šâ¡„â £â¢Œâ °â¡â¡ˆâ¢†â ¡â¢‚â ”â¡‚â ”â¡ˆâ¢†â ¡â¢Šâ °â¡ˆâ ’â¢„â £â¡˜â  
'â£¿â£žâ£·â£»â£žâ¡¾â£â¡¾â¢¯â£½â¢ºâ¡µâ£â¡Ÿâ£¶â¡¹â£žâ¡½â£šâ¡·â£¹â¢®â¡»â£µâ¢«â¡Ÿâ¡½â£Žâ ·â£­â£›â¢®â¡³â£â¢®â¡³â£â¡žâ¡¶â£¿â£¿â£¿â£¿â¡¿â ˆâ¢€â£¸â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â €â ¬â£™â †â¢³â ˜â ¤â£‰â †â¡±â¢ˆâ¢†â ¡â¢Šâ °â¡â¢†â ¡â¢‚â ±â£€â £â Œâ¢’â¡ˆâ¢†â ¡â¢‚â ±â¡ˆâ ¤â¢¡â ‰â¡‚â¢†â ¡â¡
'â£¿â¢¾â£½â£³â¢¯â£Ÿâ¡½â£žâ¡¿â£œâ£³â¡½â£ºâ¡â£¶â¢«â¢·â¡¹â£â ¾â£­â£³â¢»â£œâ¡³â£½â¢³â£­â£›â¢¶â£­â¢³â¡â£®â¢³â¡â£®â£â¡³â£½â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â â¡ˆâ ´â£ˆâ¢â °â£‰â ’â¡¡â¢Šâ ”â¡¡â¢ˆâ †â¡¡â¢’â ˆâ¡”â¡ˆâ¢†â ¡â¡â¢‚â¡‘â ¢â¡â¢‚â …â¡Šâ ”â¡ â¢ƒâ ¢â¡‘â ¨â „â¡ƒâ ”
'â£¿â£»â¢¾â£½â£³â¢¾â£¹â£³â¢½â¡ºâ£µâ¢«â¢·â¡¹â£žâ¡½â¢®â£½â£šâ¢¯â£³â¢­â£³â¢­â£³â¢­â£³â¢®â¡â¡¾â£œâ¢§â¡»â£œâ¢§â¡»â¢¶â£­â¢³â¢§â£¿â£¿â£¿â£¿â£¿â£¿â£›â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â ƒâ¡â¢ˆâ ²â¢¡â¢Žâ¡±â¢„â¡©â¢â ¡â¢Šâ „â£ƒâ °â¢â ¢â¡‘â °â¡ˆâ¢„â ƒâ¡”â£â ¢â¡‘â¢„â ƒâ¡Œâ °â£â ’â¡„â¢ƒâ Œâ¡‘â¢Œâ °â¢
'â£¿â£½â£»â¢¾â¡½â£žâ£§â¢Ÿâ£žâ£³â¡­â£Ÿâ¢®â¢·â¡¹â£žâ£³â¢®â¡â£¾â£±â¢»â¡œâ£§â£›â¢®â¡³â£â¢¾â£±â¢â¡¾â£±â¢â¡¾â£¹â¢³â£Žâ¡Ÿâ¡¾â£´â¢›â£¿â£¿â£¿â£·â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â Ÿâ ­â¡€â¢¡â Œâ¡¡â¢‚â¡…â¢ºâ¡”â¡¨â¢”â¡¡â¢Šâ¡…â¢’â  â¡‘â£ˆâ ’â¡ˆâ¢…â ’â£ˆâ ’â¡â¢„â ’â¡¨â â¡Œâ °â£â¢‚â ’â¡ˆâ¢†â¡˜â °â¢ˆâ ¢â¢
'â£¿â¢¾â¡½â£¯â¢·â£»â¢®â£›â£®â¢³â£â£®â£›â¢®â¢·â¡¹â£Žâ¢·â£¹â ¶â£­â£³â£›â ¶â£­â¡³â£â¡žâ£§â£›â¢®â£³â¡â£®â¢³â£â¡³â¢®â£â¡³â£¯â£¹â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â¢»â¡â žâ¡Œâ â¡¤â ‚â ¤â¢¡â ˜â£â £â£â¡â †â¡”â£¡â ˆâ¡†â¡‘â °â£€â ƒâ¡œâ¢ â¢Šâ¡â¢Œâ °â£ˆâ ‚â¡…â¢ƒâ Œâ¡¡â¢â¢‚â ±â¢ˆâ †â¢Œâ ¡â¢Šâ „â ¡
'â¡¿â£¯â£Ÿâ¡·â¢¯â¢·â£«â ·â£­â¢·â£šâ¢¶â¡¹â¢®â¡³â£â¢®â£³â¢­â£›â¢¶â££â¢â¡Ÿâ¡¶â£â¢®â£â ¶â£­â¡³â¢§â£»â£œâ¡³â¢®â£â¡³â¢®â£½â£Ÿâ£©â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â ¿â£â¡³â¢â¢¦â£¹â¡°â¢¬â ‘â¡ â ¨â °â¢€â£‹â „â ³â£¼â¡„â£™â °â¢ â¡˜â ¤â£â £â¡â¢Œâ¡â¢¢â â¡°â¢ˆâ ¢â „â¡ƒâ ”â£ˆâ ¢â ‘â¡‚â¢Œâ ¢â¡â¢Žâ  â ƒâ¡„â¢Šâ 
'â£¿â¢·â£¯â£Ÿâ¢¯â¢·â£«â£Ÿâ¢®â£³â¡â£®â£›â¢§â£›â¢®â¡³â£â¡®â£â£®â¢³â£â£žâ¡³â£â ¾â£œâ¡»â¢¶â£¹â¢³â¡³â¢®â£â¡³â¢®â£â¡³â£žâ¢¿â£­â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â¢¿â£­â¢»â£Œâ ³â£­â¢–â£¦â ³â£Œâ¢Œâ ¡â¢â ’â¢¡â ˆâ¢Žâ ¡â œâ£·â¡ˆâ œâ£ â ˜â¡°â¢€â¢£â ˜â¡„â ’â¡„â¢£â â¡¡â¢‚â ±â¢ˆâ ’â¡ â¢â £â¢˜â  â¢‚â …â¢Šâ â ¡â â ‚â Œ
'â£¿â£»â¢¶â¢¯â£›â¡¾â¡µâ£žâ¢¯â¢¶â¡¹â£–â¢¯â¡žâ£­â£³â¢»â£œâ¡³â£â¢®â¡³â£žâ¡¼â£³â¢­â£›â£®â¡â£§â¢â¡·â£¹â¢³â¢®â£â¡³â£Žâ ·â£­â£»â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â¢¯â£½â£³â¢®â¡³â£Žâ¡³â¡¼â¡žâ¡´â¢«â¡œâ Œâ¢¦â ‰â ˆâ „â¡â ‚â¡œâ¢¨â¢½â£¿â¡”â¢‚â ±â£€â ƒâ¢†â ±â£ˆâ ±â¡ˆâ¢†â ±â£€â £â¡˜â¢„â £â¡â¢¡â Šâ¡„â £â¢Œâ ˜â¡€â¢Šâ ¡â Œâ ¡â¢ˆ
'â£Ÿâ¡·â¢¯â£Ÿâ¡½â£ºâ£â¢¾â¡¹â£Žâ¢·â¡¹â¢®â£â ¶â£­â¡³â¢®â£â¢®â¡»â£â¢®â¡³â£â¢®â£³â¢®â£â¢®â¡»â¡¼â£­â£›â ¾â£œâ¡³â£­â£›â ¶â£­â¢¿â£¹â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â£â£Ÿâ¡³â¢žâ¡¥â¢¯â¡½â£­â¢³â¢§â¡¹â¢œâ££â¡™â¢¾â¡€â Žâ ¡â €â¢„â ¡â¡€â £â¢Žâ¢¿â£¿â£§â£–â¡ â¢‰â †â¡’â ¤â¡‘â¡ˆâ¢†â ±â£€â £â¡˜â¢„â £â¡˜â¢„â £â¡˜â °â¡ˆâ †â¡â ¢â â¡ˆâ¢‚â 
'â£¯â£Ÿâ£Ÿâ£®â¡½â£³â¢žâ£¯â¢³â¡â£®â¢½â¡³â£Žâ¡Ÿâ¡¶â£â¢¯â¡žâ£§â£›â¢®â¢·â¡¹â£žâ¢§â£›â ¾â£œâ¢§â¡»â£µâ¢£â£â ¿â£œâ¡³â¢§â£â ¿â£œâ¡§â£â¡¿â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¯â£Ÿâ¢¾â¡¸â£¹â¡â£žâ£±â žâ£¥â¢»â¢¦â¡™â£¦â §â¡™â¢¦â¡‘â¢Žâ ¡â¡€â †â °â¢€â¢£â ˜â¡¼â£·â£â¡¿â£¿â£¶â£¾â£¤â£µâ£ â¡‘â£ˆâ ’â ¤â¢‘â °â¡ˆâ¢†â ±â¡ˆâ¢†â ¡â¢ƒâ œâ¡ â ‘â£‚â ‘â¡ â â Œ
'â£·â£»â¡¼â¢¶â£»â¢µâ£«â¢žâ£§â¢»â¡œâ£§â¢»â¡¼â£¹â¢³â¡â£®â¡â¡¶â£­â£›â¢®â£³â¡â£®â£â¡»â£œâ¢§â¡»â£œâ¡³â£žâ¡½â¢®â£â¡³â£Žâ ¿â£œâ¡³â£â ¾â£­â£›â ¿â¡¿â¢¿â ¿â£¿â¢¿â£¿â ‹â ›â ›â ¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£žâ¡§â¢·â¡©â¡œâ ¶â£¥â¢¯â¡™â£§â£¾â µâ££â â£Œâ £â¡œâ¢¢â ¡â¡â ‚â …â£‚â ¢â ˜â¢¤â¢«â¡â£»â£·â£»â¢žâ£½â£»â£Ÿâ£¿â¡¿â£¿â£¶â£®â£´â£¡â£ˆâ †â¡‘â Œâ¢¢â â¢Žâ¡â ¡â¡€â Žâ¢ â¢â ‚
'â£·â£³â¢»â£â£žâ¢§â£›â¡¾â£œâ¢§â¡»â£œâ£§â¢»â¡µâ£«â¢¾â¡±â£â¢·â££â¢Ÿâ£®â¢³â¡â¡¶â£­â¢³â¡â£®â¢³â£­â¢³â¡â£žâ¡³â¢®â¡â£¾â¡¹â¢§â¡»â£œâ¡»â¢¶â¡â¡·â£â£›â ®â¡µâ¢Žâ£½â €â €â €â €â¢®â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â¡žâ£¥â¢³â¡‰â¢³â¡œâ£¦â¢¿â¡»â£Œâ ·â£¢â â£ â ’â¡Œâ¢ â ƒâ¡”â¢â ‚â ´â¢ˆâ¡‘â¢Žâ¡³â¢¼â¢¯â¡·â£¯â£Ÿâ£®â¢·â£»â£¾â£Ÿâ¡¿â£½â£¿â£»â£¿â£¿â£¿â£·â£¾â£¤â£‰â¡¤â ˜â¢ â â¡Œâ ‚â¡„â¢‚
'â¡·â¢¯â£›â£žâ¢®â¡»â£œâ¡³â£â¢®â¢·â¡¹â£Žâ¢·â¡¹â¢§â£â¢·â¡¹â£Žâ¢·â£«â¢žâ£§â¢»â¡µâ£«â¢·â¡¹â£Žâ¢·â¡ºâ£â ¾â£±â¢â¡³â£â¢¶â£¹â¢³â¡â£§â£›â¢§â žâ¡µâ¢Žâ¢§â¡›â£œâ¢£â¢¾â¡ƒâ €â €â €â  â£¼â£¿â£¿â£¿â£¿â£Ÿâ£·â¡»â£¬â¢“â£Œâ ¶â£¹â£¯â£—â£³â£­â ³â¡†â£â ²â  â „â ƒâ¡œâ â¡Œâ¡€â¢‚â ¬â ‘â¡Žâ¡µâ¢‹â¡žâ£¹â¢³â£»â£¾â£¿â¢¿â£Ÿâ£¾â£Ÿâ£·â£¿â£¿â£½â£·â¡¿â£¯â£¿â£¿â£¿â£¿â£¿â£¦â£´â£€â ¡â â ‚
'â£Ÿâ¢¯â¡½â£Žâ£¯â¢³â¡­â£—â¢¯â¡žâ£§â¢»â¡œâ£¯â£â¡³â¢¯â£â¢·â¡¹â£Žâ¢·â£«â¢žâ£§â¢»â¡µâ£«â¢·â¡¹â£Žâ ·â£­â¢»â¡¥â£â¢·â¡¹â£Žâ¢·â£«â¢žâ¡µâ£­â ºâ¡­â£â¢®â¢£â¡â£¬â “â¡¾â¡‡â €â €â €â â¢¼â£½â£¿â£¿â£¿â£¿â£·â£¿â ¶â£â¢¬â£›â£·â£»â£žâ¡·â£Šâ ·â£‰â ¦â£â £â£˜â â¡ˆâ ±â£€â –â ¡â €â¡â¡˜â¡”â «â¡”â¢£â¡žâ£¿â£¿â£¿â£¿â£¿â£¿â£¾â£¿â£¿â£¾â£¿â£¾â¢¿â£Ÿâ£·â¡¿â£¯â£¿â£¿â¢¿â£¿â£¿â£¿â£¾â£¤
'â£¯â£›â¢¾â¡±â£â¢·â¡¹â£Žâ¢·â¡¹â£Žâ¢·â£›â ¶â£­â£›â ·â£Žâ¢¯â¡³â¡½â£Žâ¢·â£«â¢žâ£§â¢»â¡µâ£«â ·â£­â¢»â¡œâ£§â¢³â¡â£Žâ¢·â¡¹â£Žâ¢·â£‹â ¾â£œâ¢«â¡µâ£šâ¡¬â¢³â¡œâ¢¦â¡›â¡´â£§â €â €â €â €â €â¢™â£¿â£¿â£¿â£¿â£¿â£¯â¡¿â£œâ¡¶â£¹â£¾â¢¯â£Ÿâ£³â¡½â¢Žâ¡•â¢¢â °â£â £â¡œâ¢€â ¡â¡˜â¢ â â¢†â â¡¤â¢©â “â£¬â¢“â¡žâ£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£½â£¿â£¿â£¯â£¿â£»â£¿â£¿
'â¡·â£­â¡—â£¯â ½â£Žâ¢·â£«â¢žâ¡µâ£«â¡žâ£­â£›â ¶â£­â¢»â¡¼â££â¢Ÿâ¡µâ£«â¢žâ¡µâ£«â¢žâ£§â¢»â¡µâ£»â¡œâ£§â¢»â£œâ¡³â¢žâ¡­â¡žâ£µâ¢«â¡žâ£­â¢»â¢¬â¡³â£œâ¡±â¢ºâ¡±â¢Žâ¢§â¡™â¡–â£¿â €â â „â¢€â €â €â ‰â£¿â£¿â£¿â£¿â£¿â£Ÿâ¡·â£â£·â£¿â£¿â¢¿â£»â¡â¢®â¡œâ£¡â “â ¬â£‘â œâ£¨â ‚â¡â¢ƒâ¡šâ¢¤â¡ˆâ¢ â¢ƒâ¡â¢¦â£›â¡¾â£½â£»â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£Ÿâ£¿â£½â£¿â£½â£¿
'â£Ÿâ¡µâ£»â£œâ¡»â£œâ¢§â£›â¢®â¡³â¢§â¡»â£µâ¢«â¡Ÿâ¡¼â¢§â¡»â£µâ¢«â¡žâ£µâ¢«â¡žâ£µâ¢«â¡žâ£§â£›â¢¶â¡¹â£Žâ¢·â£ªâ ½â£¹â¢¼â£™â¢®â£³â¢¹â¡œâ££â¢³â£™â ¦â£â¢£â¡â¢Žâ¢¶â£­â¡¿â ›â €â €â €â¢¹â †â£„â£€â ¿â£¿â£¿â£¿â£¿â£¯â£¿â¡½â£¾â£¿â£¯â¡¿â£§â£›â¢§â¡šâ¡¥â¢Šâ ¶â£©â¢Žâ¡¡â¢šâ „â¢ƒâ œâ¡¢â£„â £â¡˜â£¬â¢£â ¿â£½â£³â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿
'â£¯â¢žâ¡µâ£Žâ¡·â£¹â¢Žâ£¯â¢³â¡½â£³â¡â£®â¢³â¡½â£¹â¢§â¡»â£œâ¢§â¡»â£œâ¢§â£»â¡œâ£§â£›â¢¶â¡¹â£Žâ¢·â¡¹â¢¶â£©â¢â ·â¡®â£â¡žâ£¬â¡“â£žâ£±â¢«â¡œâ£¹â¢¬â£³â¡¾â Ÿâ ‹â â €â¢€â €â €â €â¢¸â¡…â£¦â¢‰â¡‰â¢¿â£¿â£¿â£¿â£¿â£½â£¿â£¿â£¿â£¿â¡¿â£–â¡»â¢¦â¡›â£Œâ¢â¡¾â¡µâ¢ªâ¡•â¢¯â£Œâ¢£â£Œâ¡±â¢Žâ¡§â£™â£¤â¢â¡¿â£µâ£¿â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿
'â¢·â£«â¢žâ¡µâ£«â¢—â¡¯â£žâ¢§â¡»â£µâ¢»â¡œâ£§â¢»â¡µâ£«â¢·â¡¹â£Žâ¢·â¡¹â£Žâ¢·â¡¹â¢¶â¡¹â£Žâ¢·â¡¹â¢Žâ¡—â£¯â£œâ¢«â¢·â¡¹â¡–â£½â ²â£â¡¼â¢²â£â£¾â Ÿâ ‹â¡â¢€â €â €â €â¢°â£¿â €â €â €â ˆâ¡‡â ¸â£§â£Œâ£»â£Ÿâ£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â£¥â£‹â¢·â¡™â£žâ£®â¡½â£½â¢³â£šâ ·â£œâ¡²â£¬â¡³â¢¯â£¶â¢»â£¼â£»â£žâ£¿â£½â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿
'â£Ÿâ¡¼â£«â¢žâ¡µâ£«â¢žâ¡½â£Žâ ·â£­â¢³â¡â£®â¢·â¡¹â¢§â£â¢·â¡¹â£Žâ¢·â¡¹â£®â¡â£§â¢³â¡â¡®â¡â£â¡žâ¢¶â¢Žâ¡¿â¢¬â¡³â£â ®â£â£²â£½â Ÿâ ‹â €â  â €â¢€â¡€â¢€â¡ˆâ¢·â£¾â£¿â €â €â¢ â €â¢»â¡„â¢½â£·â£Žâ£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢§â¡â£Žâ¢¿â£¼â£³â£¿â£¿â£¿â£½â£¿â£¿â£¿â£¿â£¿â£¿â£¾â£¿â£¿â£·â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿
'â¡¾â£±â£â£žâ¡³â£â¢®â£³â¢­â¡Ÿâ£¼â¢«â¡žâ£µâ¢«â£â¡³â£Žâ¢·â¡¹â£žâ¢§â£›â¢§â¢»â¡œâ£³â žâ¡µâ£‹â¢¶â¡¹â£šâ¢®â¡œâ¢§â£›â¡¼â£¹â£¶â Ÿâ¢¡â£€â ˆâ¢’â  â£‡â¢¢â£½â£¦â£¿â£¿â£¿â£¿â ƒâ €â ˆâ¢£â €â¢³â ˆâ¢»â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â£¿â£¿â£Ÿâ¡¼â££â¢Ÿâ£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â£¿â¢¿â£»â¢¯â£Ÿâ¡³â¡½â£Žâ¢·â£›â£¾â£³â£¿â£¿â£¿â£¿â£¿â£¿â£¿
'â£³â¢¯â¡½â£¹â¢§â¡»â£œâ¢¯â¡žâ£µâ¢«â¡žâ£µâ¢«â¡žâ£½â¢£â¡Ÿâ¡¼â¢§â¡»â£œâ¡»â£œâ¢®â£“â¢â¡–â¢§â »â£œâ¡£â¢Ÿâ£¬â¢“â¡®â¢«â£µâ¡¿â ‹â €â ˆâ¢»â£¤â£šâ¡¤â¢¿â¡žâ£¿â£»â£¿â£¿â£¿â â €â €â €â ˆâ¡†â ¸â¡„â ˜â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡µâ£¿â£¿â£¿â£§â£»â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢¿â¡¿â£¿â£¿â¡¿â£Ÿâ£¿â£¯â£¿â£Ÿâ¡¿â£¿â£»â£¿â£½â£Ÿâ£·â£¿â¢¾â£Ÿâ¡¾â£½â£³â¢§â£»â£¼â£»â£½â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿
'â¢¯â¡žâ£µâ¢â¡¾â£±â¢¯â¡žâ¡½â£Žâ¢·â¡¹â£Žâ¢·â¡¹â£Žâ¢·â¡¹â£â¢§â¡Ÿâ£¼â¡±â¢â¡¶â¢­â¡ºâ£œâ¢«â£â¡²â¢­â£“â¢®â¡¹â£¼â¡Ÿâ ƒâ €â €â €â£â¡ â žâ£¿â¡½â¢Žâ¡½â£¶â¢¿â£¾â¢â¡†â €â €â €â €â €â ‘â €â£§â €â¢ºâ£¿â£¿â£¿â£¿â£¿â£¿â¡¿â €â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â£¿â£»â£â¡®â£â¡¾â£¿â£³â£¿â£Ÿâ£¿â£¿â£½â£·â£¿â£¿â£¿â£¿â£·â£¿â£¿â£¿â£¯â£¿â£¾â£Ÿâ£·â£¿â£»â£·â£¯â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿
'â£Ÿâ¡¼â££â¡Ÿâ£¼â¢£â¡Ÿâ£¼â¢³â¡â£®â¢³â¡â£®â¢³â¡â£¾â¡±â£â ¾â£œâ¢§â¡â¡žâ£œâ¡£â¢—â£Žâ ³â£Žâ£µâ£«â£¼â£¶â Ÿâ£‰â£ â €â €â €â¢€â¡¿â£·â¢â£™â£§â£¿â£¾â£¿â£«â£â£¾â£¤â£„â£²â£¤â£¹â£¦â ²â ¤â£„â €â ˆâ¢¿â£¿â£¿â£¿â£¿â£¿â ƒâ¢¤â£¿â£¿â¡¿â¢«â£™â¢®â£³â£¿â£¿â£¿â£¿â£¿â£¯â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢¿â£»â£·â£¿â¡¿â£¿â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£Ÿâ¡·â¢¯
'â£žâ¡³â£â¢¾â¡±â£â£žâ¢§â¡»â£œâ¢§â¡»â£œâ¢§â¡Ÿâ£¼â¢£â¡â£®â£›â¡¼â¢Žâ£žâ¡¹â¡²â£â£·â¡¾â Ÿâ¢‹â¢‰â£¥â£¶â£¾â£¿â£¿â£¿â£¿â ¿â¡©â¢žâ£·â Ÿâ ‰â¡â¢Žâ ›â¡â¢¯â¡½â£»â£¿â¡»â¢¿â£¿â£¿â£¿â£¿â£·â£¦â£œâ£¦â¡€â ¹â£¿â£¿â£¿â£¿â â¢€â£¿â¡¿â ‰â¢â £â£žâ£¯â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢¿â¡¿â£Ÿâ£¿â£Ÿâ£¿â¡¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£»â ¾â£â¢¯
'â£¯â£â¢¾â££â¢Ÿâ¡¼â£Žâ¡·â£¹â¢Žâ£¯â¢³â¡â£®â¡â£®â¢³â¡â¢¶â¡¹â£œâ£«â£–â£½â ¿â¢‹â¡¡â¢´â ¶â£žâ¡¾â£žâ£·â£¿â£¾â£¿â£¿â£Ÿâ¡¶â£¡â£¿â ‹â €â €â¢â ¢â •â¡šâ¢¡â¢Žâ¡±â ­â£½â ¿â£Ÿâ¢¿â¡»â£â£®â£¿â£¿â£¿â£·â¡§â£¿â£¿â£¿â¡‹â¢¥â£¿â¡â£ â£„â£ â£”â£«â¢¿â£»â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¯â¢¿â£¿â£Ÿâ¡¿â£¿â£¾â£¿â£¿â¡¿â£Ÿâ£¿â£¿â£½â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢¿â£»â£½â£¯â¢¿â¡½â£ž
'â¡·â¢®â£³â¡â£®â¢³â¡â£¾â¡±â£â¡žâ£§â£›â¢¶â£½â£®â¡·â ¿â¢›â ›â¡«â¢â ‹â¡…â£Žâ¢±â¡™â£Žâ ¿â£œâ£»â¡½â£¿â£¾â£¿â£¿â£¿â£¿â£¿â£¿â â¢€â¢ â¡â£ â ‰â ’â ¬â¡â¢Žâ¡°â¢¿â£¬â¡»â£œâ£¯â¢·â£»â£¿â£¿â£¿â£¿â£¿â£·â£‰â¡Ÿâ¢¦â¡‘â£®â¢¯â£´â£­â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢·â£»â¡¾â£¿â£Ÿâ£¯â¡¿â£¿â£¿â£¯â£Ÿâ£¿â£½â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£»â¡·â£¯â¡¿â£½â¢¯
'â£½â¢³â¢§â¡»â£œâ¢§â¡»â¢¶â£¹â¢®â£½â¡¶â ¿â ›â ‰â €â â ¤â £â¡˜â â¢Šâ ’â¡Œâ¢‚â §â£œâ¡Žâ£·â£¹â¡¾â£½â£·â¡¿â£¿â£¿â£¿â£¿â ¿â£¡â ²â£Œâ¢¶â¡¹â¢¿â£†â£™â£²â ±â£®â¢™â ¶â££â¢¿â£½â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¦â ¥â£¹â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢¿â£»â¢·â£¯â£Ÿâ£·â£¿â£³â£¯â¢¿â¡½â£·â£¿â£¾â£¿â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£³â£¿â£¿â¡·â£Ÿâ£¯â£¿
'â£³â¢¯â¡žâ£µâ£«â¢žâ£½â£³â Ÿâ ‹â â €â €â €â €â â  â ‚â¢€â ˆâ „â¢¡â ˜â¡°â£â¡žâ£´â¢¯â¡·â£¯â£Ÿâ£¿â¡¾â£Ÿâ¡¿â¡¹â£â¢†â¡³â¢£â¡½â£˜â£®â¡Ÿâ£½â£¿â£¿â¢£â ·â£Œâ£¯â£›â£·â£»â¢¾â£½â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â¡€â£¶â£¹â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¯â£Ÿâ£¯â¢·â¡¿â£œâ¢¯â¢¾â£­â¢¿â¡¿â£¿â¡¿â£¿â£¾â¢¿â£¿â¡¿â£¿â£»â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â£¿â£¿â£¾â£¿â£»â£¿â£¾
'â£Ÿâ¢®â£½â¢ºâ£µâ¡¿â ‹â â €â €â €â €â €â €â €â €â €â ¤â£€â ¢â¡œâ¢¢â¡â¢²â£Ÿâ¡¾â£½â£¯â£¿â£¿â£»â¡½â£›â¢¥â¢³â¡±â¢Žâ¢Žâ£â¢£â¡»â£µâ£³â¡¿â£Ÿâ£¿â£žâ£¯â¢¿â£â¡¶â£›â¡¾â£½â£»â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â ‰â¢³â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢¯â£Ÿâ¡¾â£žâ¡¯â£â¢¿â£«â¡—â£¾â£¯â£¿â¡½â£¿â£¿â¡¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â£¿â£Ÿâ£¿â£·â£¿
'â£»â¢žâ£¼â¡Ÿâ ‹â €â €â €â €â €â €â €â €â €â €â €â£‚â ”â£ â ’â£­â ³â¡œâ£§â£¿â£Ÿâ£·â£¯â¢·â£«â¢‡â¡§â£™â¢Žâ¢£â ³â¡žâ¡¼â£Œâ¢·â£»â¢½â£¯â¢¿â¡½â£¯â£Ÿâ¡žâ¡¿â£®â£½â¢³â£¿â£»â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â â ˜â¢¦â¡ˆâ¢¿â£žâ£¿â£¿â£¿â£¿â£·â¡¿â£¿â£Ÿâ¡¾â£½â£Ÿâ¡¾â£½â¢£â¡Ÿâ£½â£ºâ¢·â£»â¢½â£³â£¯â£¿â¢¿â£»â£¿â£»â£½â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¾â£¿
'â£¿â¡Ÿâ â €â €â €â €â €â €â €â €â €â €â €â¢€â €â¢¬â¡¸â£”â¢«â¢–â£»â£¾â£¿â ¿â£â¡¾â£¡â §â£â žâ£°â ™â¢Žâ¡²â¢¥â£›â£¼â£»â¡¼â¢¯â¡Ÿâ£žâ¢¯â£¿â£±â¢¿â¡œâ£·â¡â£¾â¢»â£¶â£¿â£·â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â â¢³â£„â¡†â£¹â£œâ£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢¿â£Ÿâ£¿â£³â¢â¡·â£­â¢—â£¯â£›â£·â¢»â£¾â¢¯â£¿â£»â£½â£¿â£¿â£¿â£¿â£¿â£¿â£¯â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿
'â ‹â €â €â €â €â €â €â €â €â €â €â €â €â£€â¢†â¡žâ ¶â£±â£®â£¾â£¿â£¿â¢¿â¡½â£›â¡®â¢±â¡¡â£šâ¡œâ¡¸â¢£â¢›â£¤â¡â£«â£¼â ¶â¡½â¢¾â¡¹â¡žâ¡­â¢žâ ¶â¢­â¢žâ¡¹â£žâ¡½â£®â¢¿â£Ÿâ£¯â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¦â €â£»â£½â¢»â¡¼â£¾â¢¿â£¿â£¿â¢¿â£»â£¿â£¿â£¾â£³â¢¯â¡»â£¼â¢›â¡¾â¢§â£»â£¼â£»â£¾â¢¿â£½â£¿â£»â£¿â£·â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£½â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿
'â €â €â €â €â €â €â €â €â €â €â €â €â¡’â¡Œâ£žâ£¬â£¿â£¿â£¿â£¿â£¿â£¯â£¿â¡Ÿâ¢§â ˜â¡…â£¶â¢©â žâ£±â¢›â£¼â¢²â¡â££â¢Ÿâ¡½â¢žâ¡¹â¢»â¡±â£›â¢®â£™â£§â¢«â¡·â£­â¢·â£¯â£Ÿâ£¾â¡¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â£°â£¿â£¿â£»â£¿â£¯â£¿â£¿â£¿â£¿â£¿â£Ÿâ£®â¢·â¡â£¯â¢³â£­â¢»â¡¼â£Ÿâ£§â£¿â£¹â£½â£»â£¯â£¿â¢¿â£¿â£½â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿
'â €â €â €â €â €â €â „â ˆâ €â €â €â¡œâ£°â£¿â£¿â£¿â£»â£½â£¯â¢¿â£¿â£¯â ³â¡œâ¢ â¢›â¡˜â¢¤â¡ƒâ£žâ¡¥â¢â¡žâ¡¶â£™â¢®â£Ÿâ¡¼â¡³â£â£³â£«â¡â£®â£â£®â£»â¡½â¢¯â£¿â£¾â£½â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£»â£¿â¡·â¢§â£¿â£¿â£¿â£¿â¢¯â£Ÿâ¡¾â£½â¢»â¡¯â£Ÿâ£³â¡›â¢¾â£³â£½â¡½â£žâ¡¿â£¿â¢¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿
'â €â €â €â €â €â €â €â €â  â¡˜â¡¼â£¼â£¿â£»â£·â¢¿â£½â£¿â£½â£¿â£¿â£¦â ƒâ¡„â ™â ¦â ¸â €â¡—â¡Œâ¢²â¡›â£œâ ¶â£™â¡žâ£¼â£±â¢¯â£â££â¢¿â£â£¯â£Ÿâ£¾â£³â£¿â£¿â¢¯â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£Ÿâ¡¿â£¼â£¿â£‹â¢¿â¡Ÿâ£žâ£»â£žâ¡·â£¹â¢â¡·â£«â¢·â£¹â£›â£·â£»â£½â£¿â£½â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿
'â €â €â €â €â €â €â¢ â¡‰â£¥â¢»â£½â£·â¢¿â£·â£¯â£¿â£¿â£¿â£¿â£¿â£¿â ‚â „â ¡â ’â â ˆâ ³â¢â¡šâ¡¡â¢œâ¡­â¢»â¡´â£›â¢¶â£­â¡žâ£§â£Ÿâ£¯â¢¿â£­â£Ÿâ£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£Ÿâ¡›â¢¿â ™â£‡â£¿â¢«â¡â£­â£“â£®â ·â£³â¢¾â£±â¢Ÿâ£¯â£Ÿâ£¯â£·â£»â£¾â¡¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢¿â£»â£·â£Ÿâ¡·â£¯â£¿â£¿
'â €â €â£€â£„â£ â Œâ¢¦â¡±â£¯â£¿â£»â£¾â¡¿â£¯â£¿â£¿â£¿â£¿â£¿â£¿â¡â ™â €â €â €â¡°â£ƒâ¡¤â¢‹â£œâ£â£«â£œâ££â£·â£»â£Ÿâ£¶â¡¿â£Ÿâ£¾â£½â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â â¡‰â â¡«â¢œâ £â¢¯â£œâ£¦â ³â£¬â ·â£½â£šâ£·â£žâ£³â£¾â£·â£¿â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¢¯â£¿â£¹â£¿â£½â£¯â£¿


'/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
'-------------------------------------------------*FUNCTIILE_DE_CALCUL_/_DECIZIONALE*---------------------------------------------------
'/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


Function Cm2Degrees(in number cm,out number degrees)
  degrees = (360*cm) / (Math.Pi*@wheel_diameter)
EndFunction

Function MotorDegToCircleDeg( in number motorDeg, out number deg )
  deg = motorDeg * @wheel_diameter / @robot_diameter
EndFunction

Function CircleDegToMotorDeg( in number deg, out number motorDeg )
  motorDeg = deg * @robot_diameter / @wheel_diameter
EndFunction

Function circleDegToMotorDegForRotation( in number deg, out number motorDeg )
  motorDeg = deg * @robot_diameter / @wheel_diameterSpecial
EndFunction

Function ceSaUrmaresti(in number case, in number a, in number b, in number c, in number d, out number follow)
  'case
  '1 - 2 verde
  '2 - 2 albastru
  '3 - mixt
  follow = -1
  If case = 1 Then
    If b = 3 And c = 3 Then
      follow = 1
    Else 
      If c = 3 And d = 3 Then
        follow = 0
      Else 
        If a = 3 And b = 3 Then
          follow = 2
        EndIf
      EndIf
    EndIf
  Else 
    If case = 2 Then
      If b = 2 And c = 2 Then
        follow = 1
      Else 
        If c = 2 And d = 2 Then
          follow = 0
        Else
          If a = 2 And b = 2 Then
            follow = 2
          EndIf
        EndIf
      EndIf
    Else 
      If case = 3 Then
        If a + b = 5 Then
          follow = 2              
        Else 
          If c + d = 5 Then
            follow = 0
          Else   
            If b + c = 5 Then
              follow = 1    
            EndIf
          EndIf
        EndIf
      EndIf  
    EndIf
  EndIf
EndFunction

Function treiCaz(in number case, in number a, in number b, in number c, in number d, out number follow)
  'case
  '1 - 2 verde
  '2 - 2 albastru
  '3 - mixt
  follow = -1
  if( a == 4 - case AND c == 4 - case)Then
    follow = 4
  Else  
    if( b == 4 - case AND d == 4 - case)Then
      follow = 5
    EndIf      
  EndIf    
EndFunction


'/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
'----------------------------------------------------*FUNCTIILE_DE_CITIT_CULORI*----------------------------------------------------------
'/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


Function SensorRead (in number port, out number R, out number G, out number B)
  
  If port = 1 Then
    Sensor1.Raw3(R, G, B)
  Else
    Sensor2.Raw3(R, G, B)
  EndIf
  
EndFunction

Function citire(out number col)
   red = 0
  green = 0
  blue = 0
  @max_R = @maxRed
  @max_G = @maxGreen
  @max_B = @maxBlue
  Sensor3.Raw3(red, green, blue)
  red = red / @max_R * 255
  green = green / @max_G * 255
  blue = blue / @max_B * 255
 
  max = Math.Max(red, green)
  max = Math.Max(max, blue)
  min = Math.Min(red, green)
  min = Math.Min(min, blue)
  'max = 323
  'min = 182
 
  @r = red
  @g = green
  @b = blue
  If max = min Then
    hue = 0
  EndIf
  If max=@r Then
    If @g>=@b Then
      hue = 60*(@g-@b)/(max-min)
    Else
      hue = 60*(@g-@b)/(max-min)+360
    EndIf
  ElseIf max = @g Then
    hue = 60*(@b-@r)/(max-min)+120
  ElseIf max = @b Then
    hue = 60*(@r-@g)/(max-min)+240
  EndIf
 
  If max = 0 Then
    sat = 0
  Else
    sat = 1-min/max
  EndIf
 
  val = max / 255
  
  if(sat >= 0.56)Then
    col = hue  
  Else    
    col = 0   
  EndIf
  
EndFunction

Function citire2(out number col,out number saturation,out number value)
   red = 0
  green = 0
  blue = 0
  @max_R = @maxRed
  @max_G = @maxGreen
  @max_B = @maxBlue
  Sensor3.Raw3(red, green, blue)
  red = red / @max_R * 255
  green = green / @max_G * 255
  blue = blue / @max_B * 255
 
  max = Math.Max(red, green)
  max = Math.Max(max, blue)
  min = Math.Min(red, green)
  min = Math.Min(min, blue)
  'max = 323
  'min = 182
 
  @r = red
  @g = green
  @b = blue
  If max = min Then
    hue = 0
  EndIf
  If max=@r Then
    If @g>=@b Then
      hue = 60*(@g-@b)/(max-min)
    Else
      hue = 60*(@g-@b)/(max-min)+360
    EndIf
  ElseIf max = @g Then
    hue = 60*(@b-@r)/(max-min)+120
  ElseIf max = @b Then
    hue = 60*(@r-@g)/(max-min)+240
  EndIf
 
  If max = 0 Then
    sat = 0
  Else
    sat = 1-min/max
  EndIf
 
  val = max / 255
  
  if(sat >= 0.56)Then
    col = hue  
  Else    
    col = 0   
  EndIf
  
  saturation = sat
  value = val
  
EndFunction


'/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
'---------------------------------------------------*FUNCTIILE_PENTRU_MERS_FATA/SPATE*----------------------------------------------------
'/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


Function lf_cm(in number speed_max,in number cm,in string acceleration,in string deceleration,in string end_brake)
  
 
  exit_condition = 1
  Motor.ResetCount(@stop_motor)
  Sensor.SetMode(1,0)
  Sensor.SetMode(2,0)
  left_encoder = 0
  right_encoder = 0
  Cm2Degrees(cm,encoder)
  error_old = 0
  isumC = 0
  isumF = 0
  isum = 0
  flag = 1
  LocalSensorKSwitchEncoder = @SensorKSwitchEncoder
  While exit_condition = 1
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    left_encoder=left_encoder*-1
    current_encoder = (left_encoder + right_encoder) / 2
    s1 = Sensor.ReadPercent(1)
    s2 = Sensor.ReadPercent(2)
    error = s1 - s2
    If acceleration = "on" Then
      speed=(current_encoder / @acceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed > speed_max Then
        speed = speed_max
      EndIf
    Else  
      speed = speed_max
    EndIf
    If deceleration = "on" And (encoder - current_encoder) <= @deceleration_encoder Then
      speed = ((encoder - current_encoder) / @deceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed < @speed_0 Then
        speed = @speed_0
      EndIf
    EndIf
    if current_encoder <= LocalSensorKSwitchEncoder and ( error < -20 or error > 20 ) Then
      exp = current_encoder /  LocalSensorKSwitchEncoder
      kplf = @kpSensorC * ( 1 - exp )
      kdlf = @kdSensorC * ( 1 - exp )
      kilf = @kiSensorC * ( 1 - exp )
      LocalSensorKSwitchEncoder = LocalSensorKSwitchEncoder + LocalSensorKSwitchEncoder * ( Math.Abs( error ) / 250 )
      isumC = isumC + error
      isum= isumC
    Else
      kplf = @kpSensorF
      kdlf = @kdSensorF
      kilf = @kiSensorF
      isumF = isumF + error
      isum= isumC
    EndIf
    P = kplf * error
    D = kdlf * (error - error_old)
    I = kilf * isum
    Motor.StartPower(@left_motor,-(speed + (P + D)))
    Motor.StartPower(@right_motor,(speed - (P + D)))
    error_old = error
    If current_encoder > encoder Then
      exit_condition = 0
    EndIf
  EndWhile
  If end_brake = "on" Then
    Motor.Stop("BC","True")
  EndIf
EndFunction

Function lf_intersection(in number speed_max,in string acceleration,in string deceleration,in string end_brake)
  
  kp = @kp
  kd = @kd
  exit_condition = 1
  Motor.ResetCount(@stop_motor)
  Sensor.SetMode(1,0)
  Sensor.SetMode(2,0)
  error_old = 0
  While exit_condition = 1
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    left_encoder=left_encoder*-1
    current_encoder = (left_encoder + right_encoder) / 2
    s1 = Sensor.ReadPercent(1)
    s2 = Sensor.ReadPercent(2)
    error = s1 - s2
    P = kp * error
    D = kd * (error - error_old)
     If acceleration = "on" Then
      speed=(current_encoder / @acceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed > speed_max Then
        speed = speed_max
      EndIf
    Else  
      speed = speed_max
    EndIf
    Motor.StartPower(@left_motor,-(speed + (P + D)))
    Motor.StartPower(@right_motor,speed - (P + D))
    error_old = error
    If s1 < @grey Or s2 < @grey Then
      exit_condition = 0
    EndIf
  EndWhile
  If deceleration = "on" Then
    Motor.ResetCount(@stop_motor)
    exit_condition = 1
    Cm2Degrees(@wheel2sensor_distance,encoder)
    While exit_condition = 1
      left_encoder = Motor.GetCount(@left_motor)
      right_encoder = Motor.GetCount(@right_motor)
      left_encoder = -1 * left_encoder
      current_encoder = (left_encoder + right_encoder) / 2
      speed = ((encoder - current_encoder) / @deceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed < @speed_0 Then
        speed = @speed_0
      EndIf
      Motor.StartPower(@left_motor,-speed)
      Motor.StartPower(@right_motor,speed)
      If current_encoder >= encoder Then
        exit_condition = 0
      EndIf
    EndWhile
  EndIf
  If end_brake = "on" Then
    Motor.Stop("BC","True")
  EndIf
EndFunction

Function lf_cm_read_col(in number speed_max,in number cm,in string acceleration,in string deceleration,in string end_brake,out number type)
  
  Cm2Degrees(8.5,prim_st)
  Cm2Degrees(11,prim_dr)
  Cm2Degrees(13.5,doi_st)
  Cm2Degrees(15.5,doi_dr)
  
  frec[360] = 0
  
  kp = 0.5
  kd = @kd
  exit_condition = 1
  Motor.ResetCount(@stop_motor)
  Sensor.SetMode(1,0)
  Sensor.SetMode(2,0)
  left_encoder = 0
  right_encoder = 0
  Cm2Degrees(cm,encoder)
  error_old = 0
  flag = 1
  While exit_condition = 1
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    left_encoder=left_encoder*-1
    current_encoder = (left_encoder + right_encoder) / 2
    s1 = Sensor.ReadPercent(1)
    s2 = Sensor.ReadPercent(2)
    error = s1 - s2
    P = kp * error
    D = kd * (error - error_old)
    If acceleration = "on" Then
      speed=(current_encoder / @acceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed > speed_max Then
        speed = speed_max
      EndIf
    Else  
      speed = speed_max
    EndIf
    If deceleration = "on" And (encoder - current_encoder) <= @deceleration_encoder Then
      speed = ((encoder - current_encoder) / @deceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed < @speed_0 Then
        speed = @speed_0
      EndIf
    EndIf
    
    if((current_encoder>=prim_st AND current_encoder<=prim_dr) OR (current_encoder>=doi_st AND current_encoder<=doi_dr))Then
      citire(hue)
      frec[hue] = frec[hue] + 1
      EV3.SetLEDColor("RED","NORMAL")
    Else  
      EV3.SetLEDColor("GREEN","NORMAL")     
    EndIf
    
    Motor.StartPower(@left_motor,-(speed + (P + D)))
    Motor.StartPower(@right_motor,(speed - (P + D)))
    error_old = error
    If current_encoder > encoder Then
      exit_condition = 0
    EndIf
  EndWhile
  If end_brake = "on" Then
    Motor.Stop("BC","True")
  EndIf
  
  
  type=0
  contor = 0 
  for i=90 to 210 ' verde
    contor = contor + frec[i]
  EndFor  
  'LCD.Write(10,10,contor)
  if(contor > @contor_error)Then
    type = 1' verde * 2
  EndIf     
  contor = 0 
  for i=211 to 270'albastru
    contor = contor + frec[i]
  EndFor   
  'LCD.Write(30,10,contor)
  if(contor > @contor_error)Then
    if(type = 1)Then
      type = 3'albasrru + verde
    Else    
      type = 2'albastru * 2
    EndIf
  EndIf    
  
EndFunction

Function lf_intersection_read_col(in number speed_max,in string acceleration,in string deceleration,in string end_brake,out number type)
  
  
  Cm2Degrees(8.5,prim_st) '3.5 +6.5
  Cm2Degrees(10.5,prim_dr)'6
  Cm2Degrees(13.5,doi_st)'8.5
  Cm2Degrees(15.7,doi_dr)'10.5
  
  frec[360] = 0
  
  kp = @kp
  kd = @kd
  exit_condition = 1
  Motor.ResetCount(@stop_motor)
  Sensor.SetMode(1,0)
  Sensor.SetMode(2,0)
  error_old = 0
  While exit_condition = 1
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    left_encoder=left_encoder*-1
    current_encoder = (left_encoder + right_encoder) / 2
    s1 = Sensor.ReadPercent(1)
    s2 = Sensor.ReadPercent(2)
    if((current_encoder>=prim_st AND current_encoder<=prim_dr) OR (current_encoder>=doi_st AND current_encoder<=doi_dr))Then
      citire(hue)
      frec[hue] = frec[hue] + 1
      EV3.SetLEDColor("RED","NORMAL")
    Else  
      EV3.SetLEDColor("GREEN","NORMAL")       
    EndIf
    error = s1 - s2
    P = kp * error
    D = kd * (error - error_old)
     If acceleration = "on" Then
      speed=(current_encoder / @acceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed > speed_max Then
        speed = speed_max
      EndIf
    Else  
      speed = speed_max
    EndIf
    Motor.StartPower(@left_motor,-(speed + (P + D)))
    Motor.StartPower(@right_motor,speed - (P + D))
    error_old = error
    If s1 < @grey Or s2 < @grey Then
      exit_condition = 0
    EndIf
  EndWhile
  deg = current_encoder
  
  exit_condition = 1
  Motor.ResetCount(@stop_motor)
  left_encoder = 0
  right_encoder = 0
  Cm2Degrees(6,encoder)
  error_old = 0
  flag = 1
  While exit_condition = 1 
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    current_encoder = ((-1*left_encoder) + right_encoder) / 2
    error = left_encoder + right_encoder
    
    if((current_encoder+deg>=prim_st AND current_encoder+deg<=prim_dr) OR (current_encoder+deg>=doi_st AND current_encoder+deg<=doi_dr))Then
      citire(hue)
      frec[hue] = frec[hue] + 1
      EV3.SetLEDColor("RED","NORMAL")
    Else  
      EV3.SetLEDColor("GREEN","NORMAL")       
    EndIf
    
    P = kp * error
    D = kd * (error - error_old)
    speed=speed_max
    Motor.StartPower(@left_motor,-(speed + (P + D)))
    Motor.StartPower(@right_motor,(speed - (P + D)))
    error_old = error
    If current_encoder > encoder Then
      exit_condition = 0
    EndIf
  EndWhile
  If end_brake = "on" Then
    Motor.Stop("BC","True")
  EndIf
  
  type=0
  contor = 0 
  for i=90 to 210 ' verde
    contor = contor + frec[i]
  EndFor  
  'LCD.Write(10,10,contor)
  if(contor > @contor_error)Then
    type = 1' verde * 2
  EndIf     
  contor = 0 
  for i=211 to 270'albastru
    contor = contor + frec[i]
  EndFor   
  'LCD.Write(30,10,contor)
  if(contor > @contor_error)Then
    if(type = 1)Then
      type = 3'albasrru + verde
    Else    
      type = 2'albastru * 2
    EndIf
  EndIf    
  'handle = EV3File.OpenWrite("vectorfrecventa.txt")
  'i = 0
  final = " "
  'While i < 100
    'a = frec[i]
    'aux = Text.Append(a, " ")
    'final = Text.Append(final, aux)
    'i = i + 1
  'EndWhile
  'EV3File.WriteLine(handle, final)
  'final = " "
  'While i < 200
    'a = frec[i]
    'aux = Text.Append(a, " ")
    'final = Text.Append(final, aux)
    'i = i + 1
  'EndWhile
  'EV3File.WriteLine(handle, final)
  'final = " "
  'While i < 300
    'a = frec[i]
    'aux = Text.Append(a, " ")
    'final = Text.Append(final, aux)
    'i = i + 1
  'EndWhile
  'EV3File.WriteLine(handle, final)
  'final = " "
  'While i < 360
    'a = frec[i]
    'aux = Text.Append(a, " ")
    'final = Text.Append(final, aux)
    'i = i + 1
  'EndWhile
  'EV3File.WriteLine(handle, final)

EndFunction

Function lf_cm_precision(in number speed_max,in number cm,in string acceleration,in string deceleration,in string end_brake)
  
  kp = 1'1 4
  kd = 4
  exit_condition = 1
  Motor.ResetCount(@stop_motor)
  Sensor.SetMode(1,0)
  Sensor.SetMode(2,0)
  left_encoder = 0
  right_encoder = 0
  Cm2Degrees(cm,encoder)
  error_old = 0
  flag = 1
  While exit_condition = 1
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    left_encoder=left_encoder*-1
    current_encoder = (left_encoder + right_encoder) / 2
    s1 = Sensor.ReadPercent(1)
    s2 = Sensor.ReadPercent(2)
    error = s1 - s2
    P = kp * error
    D = kd * (error - error_old)
    If acceleration = "on" Then
      speed=(current_encoder / @acceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed > speed_max Then
        speed = speed_max
      EndIf
    Else  
      speed = speed_max
    EndIf
    If deceleration = "on" And (encoder - current_encoder) <= @deceleration_encoder Then
      speed = ((encoder - current_encoder) / @deceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed < @speed_0 Then
        speed = @speed_0
      EndIf
    EndIf
    Motor.StartPower(@left_motor,-(speed + (P + D)))
    Motor.StartPower(@right_motor,(speed - (P + D)))
    error_old = error
    If current_encoder > encoder Then
      exit_condition = 0
    EndIf
  EndWhile
  If end_brake = "on" Then
    Motor.Stop("BC","True")
  EndIf
EndFunction

Function lf_cm_cu_cub(in number speed_max,in number cm,in string acceleration,in string deceleration,in string end_brake)
  
  kp = 0.25
  kd = 0.5
  exit_condition = 1
  Motor.ResetCount(@stop_motor)
  Sensor.SetMode(1,0)
  Sensor.SetMode(2,0)
  left_encoder = 0
  right_encoder = 0
  Cm2Degrees(cm,encoder)
  error_old = 0
  flag = 1
  While exit_condition = 1
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    left_encoder=left_encoder*-1
    current_encoder = (left_encoder + right_encoder) / 2
    s1 = Sensor.ReadPercent(1)
    s2 = Sensor.ReadPercent(2)
    error = s1 - s2
    P = kp * error
    D = kd * (error - error_old)
    If acceleration = "on" Then
      speed=(current_encoder / @acceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed > speed_max Then
        speed = speed_max
      EndIf
    Else  
      speed = speed_max
    EndIf
    If deceleration = "on" And (encoder - current_encoder) <= @deceleration_encoder Then
      speed = ((encoder - current_encoder) / @deceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed < @speed_0 Then
        speed = @speed_0
      EndIf
    EndIf
    Motor.StartPower(@left_motor,-(speed + (P + D)))
    Motor.StartPower(@right_motor,(speed - (P + D)))
    error_old = error
    If current_encoder > encoder Then
      exit_condition = 0
    EndIf
  EndWhile
  If end_brake = "on" Then
    Motor.Stop("BC","True")
  EndIf
EndFunction

Function lf_intersection_cu_cub(in number speed_max,in string acceleration,in string deceleration,in string end_brake)
  
  kp = 0.25
  kd = 0.5
  exit_condition = 1
  Motor.ResetCount(@stop_motor)
  Sensor.SetMode(1,0)
  Sensor.SetMode(2,0)
  error_old = 0
  While exit_condition = 1
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    left_encoder=left_encoder*-1
    current_encoder = (left_encoder + right_encoder) / 2
    s1 = Sensor.ReadPercent(1)
    s2 = Sensor.ReadPercent(2)
    error = s1 - s2
    P = kp * error
    D = kd * (error - error_old)
     If acceleration = "on" Then
      speed=(current_encoder / @acceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed > speed_max Then
        speed = speed_max
      EndIf
    Else  
      speed = speed_max
    EndIf
    Motor.StartPower(@left_motor,-(speed + (P + D)))
    Motor.StartPower(@right_motor,speed - (P + D))
    error_old = error
    If s1 < @grey And s2 < @grey Then
      exit_condition = 0
    EndIf
  EndWhile
  If deceleration = "on" Then
    Motor.ResetCount(@stop_motor)
    exit_condition = 1
    Cm2Degrees(@wheel2sensor_distance,encoder)
    While exit_condition = 1
      left_encoder = Motor.GetCount(@left_motor)
      right_encoder = Motor.GetCount(@right_motor)
      left_encoder = -1 * left_encoder
      current_encoder = (left_encoder + right_encoder) / 2
      speed = ((encoder - current_encoder) / @deceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed < @speed_0 Then
        speed = @speed_0
      EndIf
      Motor.StartPower(@left_motor,-speed)
      Motor.StartPower(@right_motor,speed)
      If current_encoder >= encoder Then
        exit_condition = 0
      EndIf
    EndWhile
  EndIf
  If end_brake = "on" Then
    Motor.Stop("BC","True")
  EndIf
EndFunction

Function lf_cm_cu_nava(in number speed_max,in number cm,in string acceleration,in string deceleration,in string end_brake)
  
  kp = 1
  kd = 0.5
  exit_condition = 1
  Motor.ResetCount(@stop_motor)
  Sensor.SetMode(1,0)
  Sensor.SetMode(2,0)
  left_encoder = 0
  right_encoder = 0
  Cm2Degrees(cm,encoder)
  error_old = 0
  flag = 1
  While exit_condition = 1
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    left_encoder=left_encoder*-1
    current_encoder = (left_encoder + right_encoder) / 2
    s1 = Sensor.ReadPercent(1)
    s2 = Sensor.ReadPercent(2)
    error = s1 - s2
    P = kp * error
    D = kd * (error - error_old)
    If acceleration = "on" Then
      speed=(current_encoder / @acceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed > speed_max Then
        speed = speed_max
      EndIf
    Else  
      speed = speed_max
    EndIf
    If deceleration = "on" And (encoder - current_encoder) <= @deceleration_encoder Then
      speed = ((encoder - current_encoder) / @deceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed < @speed_0 Then
        speed = @speed_0
      EndIf
    EndIf
    Motor.StartPower(@left_motor,-(speed + (P + D)))
    Motor.StartPower(@right_motor,(speed - (P + D)))
    error_old = error
    If current_encoder > encoder Then
      exit_condition = 0
    EndIf
  EndWhile
  If end_brake = "on" Then
    Motor.Stop("BC","True")
  EndIf
EndFunction

Function MoveSyncAcc(in number speed_max,in number cm,in string acceleration,in string deceleration,in string end_brake)
  exit_condition = 1
  Motor.ResetCount(@stop_motor)
  left_encoder = 0
  right_encoder = 0
  Cm2Degrees(cm,encoder)
  error_old = 0
  isumC = 0
  isumF = 0
  isum = 0
  flag = 1
  LocalSensorKSwitchEncoder = @SensorKSwitchEncoder
  While exit_condition = 1
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    current_encoder = ((-1*left_encoder) + right_encoder) / 2
    error =  left_encoder + right_encoder
    If acceleration = "on" Then
      speed=(current_encoder / @acceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed > speed_max Then
        speed = speed_max
      EndIf
    Else  
      speed = speed_max
    EndIf
    If deceleration = "on" And (encoder - current_encoder) <= @deceleration_encoder Then
      speed = ((encoder - current_encoder) / @deceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed < @speed_0 Then
        speed = @speed_0
      EndIf
    EndIf
    if current_encoder <= LocalSensorKSwitchEncoder and ( error < -30 or error > 30 ) Then
      exp = current_encoder /  LocalSensorKSwitchEncoder
      kpms = @kpMotorC * ( 1 - exp )
      kdms = @kdMotorC * ( 1 - exp )
      kims = @kiMotorC * ( 1 - exp )
      LocalSensorKSwitchEncoder = LocalSensorKSwitchEncoder + LocalSensorKSwitchEncoder * ( Math.Abs( error ) / 200 )
      isumC = isumC + error
      isum= isumC
    Else
      kpms = @kpMotorF
      kdms = @kdMotorF
      kims = @kiMotorF
      isumF = isumF + error
      isum= isumC
    EndIf
    P = kpms * error
    D = kdms * (error - error_old)
    I = kims * isum
    Motor.StartPower(@left_motor,-(speed + (P + D + I)))
    Motor.StartPower(@right_motor,(speed - (P + D + I)))
    error_old = error
    If current_encoder > encoder Then
      exit_condition = 0
    EndIf
  EndWhile
  If end_brake = "on" Then
    Motor.Stop("BC","True")
  EndIf
EndFunction

Function LF_Encoder_1sensor_grey_blue1(in number encoder_cm, in number Vmax, in string acceleration, in string deceleration, in string end_brake)
  
  Sensor.SetMode(1, 4)
  '------ These values might be adjusted for light or speed
  AcceleratedEncoder = 200
  DeceleratedEncoder = 300
  black = 13
  grey = 34
  V0 = 20
  kp = 2
  kd = 2
  '------
  error_old = 0
  exit_condition = 1
  Motor.ResetCount("BC")
  
  Cm2Degrees(encoder_cm, encoder)
  
  
  r = 0
  g = 0
  b = 0
  
  While exit_condition = 1
    
    'read the sensors only one time in the loop!
    SensorRead(1, r, g, b)
    s1 = b
    CurrentEncoder = Motor.GetCount("C")
    
    'acceleration algorithm for smooth start
    If acceleration = "on" Then
      V = ( CurrentEncoder / AcceleratedEncoder ) * ( Vmax - V0 ) + V0
      V = Math.Abs( V ) 'needed to make sure the robot will not go backwards
      
      If V > Vmax Then
        V = Vmax
      EndIf
      
    ElseIf acceleration = "off" Then
      V = Vmax
    EndIf
    
    'deceleation for smooth stop
    If deceleration = "on" Then
      If encoder - CurrentEncoder < DeceleratedEncoder Then 'we must get the last part of the encoder run
        V = ( (encoder - CurrentEncoder) / DeceleratedEncoder ) * ( Vmax - V0 ) + V0
        V = Math.Abs( V ) 'needed to make sure the robot will not go backwards
        
        If V < 20 Then
          V = 20
        EndIf
        
      EndIf
    EndIf
    
    error = s1 - grey
      
    'PD controller for linefollower
    P = kp * error
    D = kd * (error - error_old)
    MotorB = -1 * ( V + (P + D) )
    MotorC = V - (P + D)
    error_old = error
    
    Motor.StartPower("B", MotorB)
    Motor.StartPower("C", MotorC)
    
    'exit condition for line follower: encoder
    If CurrentEncoder > encoder Then
      exit_condition = 0
    EndIf
    
  EndWhile
  
  'check if we want brake at the end of the linefollower
  If end_brake = "on" Then
    Motor.Stop("BC", "True")
  EndIf
EndFunction

Function LF_Encoder_1sensor_grey_blue2(in number encoder_cm, in number Vmax, in string acceleration, in string deceleration, in string end_brake)
  
  Sensor.SetMode(1, 4)
  '------ These values might be adjusted for light or speed
  AcceleratedEncoder = 200
  DeceleratedEncoder = 300
  black = 13
  grey = 34
  V0 = 20
  kp = 4.5
  kd = 4.5
  '------
  error_old = 0
  exit_condition = 1
  Motor.ResetCount("BC")
  
  Cm2Degrees(encoder_cm, encoder)
  
  
  r = 0
  g = 0
  b = 0
  
  While exit_condition = 1
    
    'read the sensors only one time in the loop!
    SensorRead(1, r, g, b)
    s1 = b
    CurrentEncoder = Motor.GetCount("C")
    
    'acceleration algorithm for smooth start
    If acceleration = "on" Then
      V = ( CurrentEncoder / AcceleratedEncoder ) * ( Vmax - V0 ) + V0
      V = Math.Abs( V ) 'needed to make sure the robot will not go backwards
      
      If V > Vmax Then
        V = Vmax
      EndIf
      
    ElseIf acceleration = "off" Then
      V = Vmax
    EndIf
    
    'deceleation for smooth stop
    If deceleration = "on" Then
      If encoder - CurrentEncoder < DeceleratedEncoder Then 'we must get the last part of the encoder run
        V = ( (encoder - CurrentEncoder) / DeceleratedEncoder ) * ( Vmax - V0 ) + V0
        V = Math.Abs( V ) 'needed to make sure the robot will not go backwards
        
        If V < 20 Then
          V = 20
        EndIf
        
      EndIf
    EndIf
    
    error = s1 - grey
      
    'PD controller for linefollower
    P = kp * error
    D = kd * (error - error_old)
    MotorB = -1 * ( V + (P + D) )
    MotorC = V - (P + D)
    error_old = error
    
    Motor.StartPower("B", MotorB)
    Motor.StartPower("C", MotorC)
    
    'exit condition for line follower: encoder
    If CurrentEncoder > encoder Then
      exit_condition = 0
    EndIf
    
  EndWhile
  
  'check if we want brake at the end of the linefollower
  If end_brake = "on" Then
    Motor.Stop("BC", "True")
  EndIf
EndFunction

Function reverseMoveSyncCM(in number distance, in number Vmax, in string acceleration, in string deceleration, in string end_brake)
 
  '------ These values might be adjusted for light or specs
  grey = @grey
  V0 = @speed_0
  kp = @kp
  kd = @kd
  '------
  pi = Math.Pi
  diameter = @wheel_diameter
  encoder = 360 * distance / pi / diameter
  error_old = 0
  exit_condition = 1
  
  If encoder > 1000 Then
    
    AcceleratedEncoder = @acceleration_encoder
    DeceleratedEncoder = @deceleration_encoder
    
  Else
    
    AcceleratedEncoder = encoder * 0.1
    DeceleratedEncoder = encoder * 0.1
    
  EndIf
  
  Motor.ResetCount("BC")
 
  While exit_condition = 1
   
    'read the sensors only one time in the loop!
    s1 = Motor.GetCount("B") * (-1)
    s2 = Motor.GetCount("C") * (-1)
    CurrentEncoder = s2
   
    'acceleration algorithm for smooth start
    If acceleration = "on" Then
      V = ( CurrentEncoder / AcceleratedEncoder ) * ( Vmax - V0 ) + V0
      V = Math.Abs( V ) 'needed to make sure the robot will not go backwards
     
      If V > Vmax Then
        V = Vmax
      EndIf
     
    ElseIf acceleration = "off" Then
      V = Vmax
    EndIf
   
    'deceleation for smooth stop
    If deceleration = "on" Then
      If encoder - CurrentEncoder < DeceleratedEncoder Then 'we must get the last part of the encoder run
        V = ( (encoder - CurrentEncoder) / DeceleratedEncoder ) * ( Vmax - V0 ) + V0
        V = Math.Abs( V ) 'needed to make sure the robot will not go backwards
       
        If V < V0 Then
          V = V0
        EndIf
       
      EndIf
    EndIf
   
    'PD controller for sync movement
   
    error = s1 + s2 'AM TE GAND SA OMOR UN COPIL COPAC ________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
    P = kp * error
    D = kd * (error - error_old)
    MotorB = (V + (P + D) )
    MotorC = -1 * (V - (P + D))
    error_old = error
   
    Motor.StartPower("B", MotorB)
    Motor.StartPower("C", MotorC)
   
    'exit condition for line follower: encoder
    If Math.Abs(CurrentEncoder) > encoder Then
      exit_condition = 0
    EndIf
   
  EndWhile
 
  'check if we want brake at the end of the linefollower
  If end_brake = "on" Then
    
    Motor.Stop("BC", "True")
    
  Else  
    
    Motor.Stop("BC", "False")
    
  EndIf
 
EndFunction

Function reverseMoveSyncCM_read(in number distance, in number V, in string end_brake,out number cubu1,out number cubu2,out number cubu3,out number cubu4)
 
  '------ These values might be adjusted for light or specs
  grey = @grey
  kp = @kp
  kd = @kd
  '------
  pi = Math.Pi
  diameter = @wheel_diameter
  encoder = 360 * distance / pi / diameter
  error_old = 0
  exit_condition = 1
  
  
  Motor.ResetCount("BC")
  Cm2Degrees(3, dist)
  Cm2Degrees(3.5, deg1)
  Cm2Degrees(10.5, deg2)
  Cm2Degrees(17.5, deg3)
  Cm2Degrees(25, deg4)
  Cm2Degrees(0, offset)
  v1[360] = 0
  v2[360] = 0
  v3[360] = 0
  v4[360] = 0
  stop1 = 0
  stop2 = 0
  stop3 = 0
  stop4 = 0
  start1 = 0
  start2 = 0
  start3 = 0
  start4 = 0
  Sensor.SetMode(3, 4)
  While exit_condition = 1
    
    
    
    'read the sensors only one time in the loop!
    s1 = Motor.GetCount("B") * (-1)
    s2 = Motor.GetCount("C")
    CurrentEncoder = s2
    citire(col)
    if Math.Abs(CurrentEncoder) >= deg1 + offset and Math.Abs(CurrentEncoder) <= deg1 + dist + offset Then  
      'if(stop1 = 0)Then
        'stop1 = 1
        'Motor.Stop("BC","true")
        'Program.Delay(1000)
      'EndIf
      v1[col]=v1[col]+1
    ElseIf Math.Abs(CurrentEncoder) >= deg2 + offset and Math.Abs(CurrentEncoder) <= deg2 + dist + offset Then  
      'if(stop2 = 0)Then
        'stop2 = 1
        'Motor.Stop("BC","true")
        'Program.Delay(1000)
      'EndIf
      v2[col]=v2[col]+1
    ElseIf Math.Abs(CurrentEncoder) >= deg3 + offset and Math.Abs(CurrentEncoder) <= deg3 + dist + offset Then
      'if(stop3 = 0)Then
        'stop3 = 1
        'Motor.Stop("BC","true")
        'Program.Delay(1000)
      'EndIf
      v3[col]=v3[col]+1
    ElseIf Math.Abs(CurrentEncoder) >= deg4 + offset and Math.Abs(CurrentEncoder) <= deg4 + dist + offset Then
      'if(stop4 = 0)Then
        'stop4 = 1
        'Motor.Stop("BC","true")
        'Program.Delay(1000)
      'EndIf
      v4[col]=v4[col]+1
    'Else 
       'if(start1 = 0 AND stop1 = 1)Then
        'start1 = 1
        'Motor.Stop("BC","true")
        'Program.Delay(1000)
      'EndIf
      'if(start2 = 0 AND stop2 = 1)Then
        'start2 = 1
        'Motor.Stop("BC","true")
        'Program.Delay(1000)
      'EndIf
      'if(start3 = 0 AND stop3 = 1)Then
        'start3 = 1
        'Motor.Stop("BC","true")
        'Program.Delay(1000)
      'EndIf
      'if(start4 = 0 AND stop4 = 1)Then
        'start4 = 1
        'Motor.Stop("BC","true")
        'Program.Delay(1000)
      'EndIf
    EndIf  
   
    
    
    'PD controller for sync movement
   
    error = s1 - s2
    P = kp * error
    D = kd * (error - error_old)
    MotorB = (V + (P + D) )
    MotorC = (V - (P + D))
    error_old = error
   
    Motor.StartPower("B", MotorB)
    Motor.StartPower("C", -MotorC)
   
    'exit condition for line follower: encoder
    If Math.Abs(CurrentEncoder) > encoder Then
      exit_condition = 0
    EndIf
   
  EndWhile
 
  'check if we want brake at the end of the linefollower
  If end_brake = "on" Then
    
    Motor.Stop("BC", "True")
    
  Else  
    
    Motor.Stop("BC", "False")
    
  EndIf
  
  contor = 0 
  for i=90 to 210  'verde
    contor = contor + v1[i]
  EndFor  
  for i=211 to 270 'albastru
    contor = contor - v1[i]
  EndFor   
  if(contor > 0)Then
    cubu1 = 3
  Else    
    cubu1 = 2  
  EndIf
  
  contor = 0 
  for i=90 to 210  'verde
    contor = contor + v2[i]
  EndFor  
  for i=211 to 270 'albastru
    contor = contor - v2[i]
  EndFor   
  if(contor > 0)Then
    cubu2 = 3
  Else    
    cubu2 = 2  
  EndIf
  
  contor = 0 
  for i=90 to 210  'verde
    contor = contor + v3[i]
  EndFor  
  for i=211 to 270 'albastru
    contor = contor - v3[i]
  EndFor   
  if(contor > 0)Then
    cubu3 = 3
  Else    
    cubu3 = 2  
  EndIf
  
  contor = 0 
  for i=90 to 210  'verde
    contor = contor + v4[i]
  EndFor  
  for i=211 to 270 'albastru
    contor = contor - v4[i]
  EndFor   
  if(contor > 0)Then
    cubu4 = 3
  Else     
    cubu4 = 2  
  EndIf
 
EndFunction


'/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
'------------------------------------------------*FUNCTIILE_PENTRU_ROTIRI/MERS_LA_UNGHI*--------------------------------------------------
'/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


Function RobotSpin(in string direction,in number degrees,in number speed,in string acceleration, in string deceleration, in string end_brake)  
  kp = 0.5
  kd = @kd
  ki = 0.01
  V0 = @speed_0
  if direction = "left" Then
    side = 1
  else 
    side = -1
  EndIf
  
  'left is side = 1 and right is side = -1
  '------

  '------
  errorOld = 0
  '------
  diamAx = @robot_diameter
  diamRoata = @wheel_diameter
  circleDegToMotorDegForRotation(degrees, encoder)
  
  
  accelerationEncoder = 100
  If 0.1 * encoder < accelerationEncoder Then
    accelerationEncoder = 0.1 * encoder
  EndIf
  decelerationEncoder = 250
  If 0.25 * encoder < decelerationEncoder Then
    decelerationEncoder = 0.25 * encoder
  EndIf
  
  Motor.ResetCount("BC")
  
  exit = 0
  err_sum = 0
  While exit <> 1
   
    r1 = Motor.GetCount("B")
    r2 = Motor.GetCount("C")
   
    currentEncoder = (Math.Abs(r1) + Math.Abs(r2)) / 2
    'r1 is the left engine, and r2 is the right engine
    error = Math.Abs(r2) - Math.Abs(r1)
    P = kp * error
    D = kd * (error - errorOld)
    I = ki * err_sum
    errorOld = error
    err_sum = err_sum + error
    
    LCD.Clear()
    LCD.Text(0, 1, 1, 2, currentEncoder)
    LCD.Update()
    
    V = speed
    If acceleration = "on" AND  currentEncoder < accelerationEncoder Then
      V = (currentEncoder / accelerationEncoder) * (speed - V0) + V0
      If V > speed Then
        V = speed
      EndIf
    EndIf
    If deceleration = "on" Then 
      If currentEncoder >= encoder - decelerationEncoder Then
        'Speaker.Tone(70, 5000, 100)
        V = ((encoder - currentEncoder) / decelerationEncoder) * (speed - V0) + V0
        If V < V0 Then
          V = V0
        EndIf
      EndIf
    EndIf  
    
    
    motorB = V + (P + D + I)
    motorC = V - (P + D + I)
    
    If exit <> 1 Then
      Motor.StartPower( "B", motorB * side )
      Motor.StartPower( "C", motorC * side )
    EndIf
    
    'errorLast = error
    If currentEncoder >= encoder Then
      exit = 1
    EndIf
   
  EndWhile
 
  If end_brake = "on" Then
    
    Motor.Stop("BC", "True")
    
  Else  
    
    Motor.Stop("BC", "False")
    
  EndIf
  
  'Program.Delay(200)
 
EndFunction

Function RobotSpinGhearaJos(in string direction,in number degrees,in number speed,in string acceleration, in string deceleration, in string end_brake)  
  
  V0 = @speed_0
  if direction = "left" Then
    kp = 0.5
    kd = 0.1
    ki = 0.0005
    side = 1
  else 
    kp = 0.5
    kd = 0.5
    ki = 0.0001
    side = -1
  EndIf
  
  'left is side = 1 and right is side = -1
  '------

  '------
  errorOld = 0
  '------
  diamAx = @robot_diameter
  diamRoata = @wheel_diameter
  circleDegToMotorDegForRotation(degrees, encoder)
  
  
  accelerationEncoder = 100
  If 0.1 * encoder < accelerationEncoder Then
    accelerationEncoder = 0.1 * encoder
  EndIf
  decelerationEncoder = 250
  If 0.25 * encoder < decelerationEncoder Then
    decelerationEncoder = 0.25 * encoder
  EndIf
  
  Motor.ResetCount("BC")
  
  exit = 0
  err_sum = 0
  While exit <> 1
   
    r1 = Motor.GetCount("B")
    r2 = Motor.GetCount("C")
   
    currentEncoder = (Math.Abs(r1) + Math.Abs(r2)) / 2
    'r1 is the left engine, and r2 is the right engine
    error = Math.Abs(r2) - Math.Abs(r1)
    P = kp * error
    D = kd * (error - errorOld)
    I = ki * err_sum
    errorOld = error
    err_sum = err_sum + error
    
    LCD.Clear()
    LCD.Text(0, 1, 1, 2, currentEncoder)
    LCD.Update()
    
    V = speed
    If acceleration = "on" AND  currentEncoder < accelerationEncoder Then
      V = (currentEncoder / accelerationEncoder) * (speed - V0) + V0
      If V > speed Then
        V = speed
      EndIf
    EndIf
    If deceleration = "on" Then 
      If currentEncoder >= encoder - decelerationEncoder Then
        V = ((encoder - currentEncoder) / decelerationEncoder) * (speed - V0) + V0
        If V < V0 Then
          V = V0
        EndIf
      EndIf
    EndIf  
    
    
    motorB = V + (P + D + I)
    motorC = V - (P + D + I)
    
    If exit <> 1 Then
      Motor.StartPower( "B", motorB * side )
      Motor.StartPower( "C", motorC * side )
    EndIf
    
    'errorLast = error
    If currentEncoder >= encoder Then
      exit = 1
    EndIf
   
  EndWhile
 
  If end_brake = "on" Then
    
    Motor.Stop("BC", "True")
    
  Else  
    
    Motor.Stop("BC", "False")
    
  EndIf
  
  'Program.Delay(200)
 
EndFunction

Function Rotation2Black(in string direction,in number speed,in string end_break)
  Sensor.SetMode(1,0)
  sensor.SetMode(2,0)
  If direction = "right" Then
    s2 = sensor.ReadPercent(2)
    While s2 > @grey_rb
      Motor.StartSync(@Stop_motor,-speed,-speed)
      s2 = sensor.ReadPercent(2)
    EndWhile
    Motor.Stop(@Stop_motor,"true")
    Time.Reset1()
    time = 300
    error = 0
    error_old = 0
    error_sum = 0
    kp = 1
    kd = 0.5
    ki = 0.0001
    exit_condition = 1
    While exit_condition = 1
      s1 = sensor.ReadPercent(1)
      s2 = sensor.ReadPercent(2)
      s1=(s1/@MaximumWhiteSensor1)*100
      s2=(s2/@MaximumWhiteSensor2)*100
      error = s1 - s2
      P = kp * error
      D = kd * (error - error_old)
      I = ki * error_sum
      Motor.StartPower(@left_motor,-((P + D + I)))
      Motor.StartPower(@right_motor,-((P + D + I)))
      error_old = error
      error_sum = error_sum + error
      If Time.Get1() > time Then
        exit_condition = 0
      EndIf
    EndWhile
    If end_break = "on" Then
      Motor.Stop(@Stop_motor,"true")
    EndIf
  Else
    s1 = sensor.ReadPercent(1)
    While s1 > @grey_rb
      Motor.StartSync(@Stop_motor,speed,speed)
      s1 = sensor.ReadPercent(1)
    EndWhile
    motor.Stop(@Stop_motor,"true")
    Time.Reset1()
    time = 300
    error = 0
    error_old = 0
    error_sum = 0
    kp = 1
    kd = 0.5
    ki = 0.0001
    exit_condition = 1
    While exit_condition = 1
      s1 = sensor.ReadPercent(1)
      s2 = sensor.ReadPercent(2)
      s1=(s1/@MaximumWhiteSensor1)*100
      s2=(s2/@MaximumWhiteSensor2)*100
      error = s2 - s1
      P = kp * error
      D = kd * (error - error_old)
      I = ki * error_sum
      Motor.StartPower(@left_motor,((P + D + I)))
      Motor.StartPower(@right_motor,((P + D + I)))
      error_old = error
      error_sum = error_sum + error
      If Time.Get1() > time Then
        exit_condition = 0
      EndIf
    EndWhile
    If end_break = "on" Then
      Motor.Stop(@Stop_motor,"true")
    EndIf
  EndIf
EndFunction

Function MoveTillBlack(in number speed,in string break)
  Sensor.SetMode(1,0)
  Sensor.SetMode(2,0)
  exit_condition = 1
  While exit_condition = 1
    s1 = Sensor.ReadPercent(1)
    s2 = Sensor.ReadPercent(2)
    Motor.StartPower(@left_motor,-speed)
    Motor.StartPower(@right_motor,speed)    
    if(s1 < @grey And s2 < @grey)Then
      exit_condition = 0
    EndIf
  EndWhile
  if(break = "true") Then
    Motor.Stop("BC","true")
  EndIf
EndFunction

Function MoveTillWhite(in number speed,in string break)
  Sensor.SetMode(1,0)
  Sensor.SetMode(2,0)
  exit_condition = 1
  While exit_condition = 1
    s1 = Sensor.ReadPercent(1)
    s2 = Sensor.ReadPercent(2)
    Motor.StartPower(@left_motor,-speed)
    Motor.StartPower(@right_motor,speed)    
    if(s1 > @grey And s2 > @grey)Then
      exit_condition = 0
    EndIf
  EndWhile
  if(break = "true") Then
    Motor.Stop("BC","true")
  EndIf
EndFunction

Function RotateTillBlack(in number speed,in string direction)
  Sensor.SetMode(1,0)
  Sensor.SetMode(2,0)
  exit_condition = 1
  
  if(direction = "right")Then
    var = -1
    sens = 1
  Else   
    var = 1  
    sens = 2
  EndIf
  
  While exit_condition = 1
    s1 = Sensor.ReadPercent(1)
    s2 = Sensor.ReadPercent(2)
    Motor.StartPower(@left_motor,speed*var)
    Motor.StartPower(@right_motor,speed*var)
    if(sens = 1)Then
      if(s1 < @grey)Then
        exit_condition = 0
      EndIf
    Else    
      if(s2 < @grey)Then
        exit_condition = 0
      EndIf  
    EndIf
  EndWhile
  'Motor.Stop(@Stop_motor,"true")
  'Program.Delay(100)
  'Time.Reset1()
  'time = 300
  'error = 0
  'error_old = 0
  'error_sum = 0
  'kp = 1
  'kd = 0.1
  'ki = 0.0001
  'exit_condition = 1

  'While exit_condition = 1
    's1 = sensor.ReadPercent(1)
    's2 = sensor.ReadPercent(2)
    's1=(s1/@MaximumWhiteSensor1)*100
    's2=(s2/@MaximumWhiteSensor2)*100
    'error = s1 - s2
    'P = kp * error
    'D = kd * (error - error_old)
    'I = ki * error_sum
    'Motor.StartPower(@left_motor,-((P + D + I)))
    'Motor.StartPower(@right_motor,-((P + D + I)))
    'error_old = error
    'error_sum = error_sum + error
    'If Time.Get1() > time Then
      'exit_condition = 0
    'EndIf
  'EndWhile
  
  Motor.Stop("BC","true")
EndFunction

Function RotateTillWhite(in number speed,in string direction)
  Sensor.SetMode(1,0)
  Sensor.SetMode(2,0)
  exit_condition = 1
  
  if(direction = "right")Then
    var = -1
    sens = 1
  Else   
    var=1  
    sens = 2
  EndIf
  
  While exit_condition = 1
    s1 = Sensor.ReadPercent(1)
    s2 = Sensor.ReadPercent(2)
    Motor.StartPower(@left_motor,speed*var)
    Motor.StartPower(@right_motor,speed*var)
    if(sens = 1)Then
      if(s1 > @grey + 20)Then
        exit_condition = 0
      EndIf
    Else    
      if(s2 > @grey + 20)Then
        exit_condition = 0
      EndIf  
    EndIf
  EndWhile
  Motor.Stop("BC","true")
EndFunction

Function PerfectLine(in number speed,in string direction)
  'Program.Delay(2000)
  RotateTillWhite(speed,direction)
  'Program.Delay(2000)
  RotateTillBlack(speed,direction)
EndFunction

Function spinDegrees(in number Vmax, in string side, in number circleDegrees, in string acceleration, in string deceleration, in string endBrake)
  
  ' ----------
  v0 = @speed_0
  ' ----------
  errorOld = 0
  exitCondition = 1
  ' ----------
  encoder = circleDegrees * 2 * 17.9 / @wheel_diameter
  accelerationEncoder = 100
  If 0.1 * encoder < accelerationEncoder Then
    accelerationEncoder = 0.1 * encoder
  EndIf
  decelerationEncoder = 200
  If 0.2 * encoder < decelerationEncoder Then
    decelerationEncoder = 0.2 * encoder
  EndIf
  
  Motor.ResetCount("BC")
  While exitCondition = 1
   
    r1 = Motor.GetCount(@left_motor)
    r2 = Motor.GetCount(@right_motor)
   
    If side = "right" Then
      currentEncoder = Math.Abs(r2)
    Else
      currentEncoder = Math.Abs(r1)
    EndIf
   
    V = Vmax
    If acceleration = "on" AND currentEncoder < accelerationEncoder Then
      V = (currentEncoder / accelerationEncoder) * (Vmax - V0) + V0
      If V > Vmax Then
        V = Vmax
      EndIf
    EndIf
    If deceleration = "on" Then
      If currentEncoder >= encoder - decelerationEncoder Then
        V = ((encoder - currentEncoder) / decelerationEncoder) * (Vmax - V0) + V0
        If V < V0 Then
          V = V0
        EndIf
      EndIf
    EndIf
    
    If side = "right" Then
      Motor.StartPower("C", V)
    Else
      Motor.StartPower("B", V * -1)
    EndIf

    If currentEncoder > encoder Then
      exitCondition = 0
    EndIf
  EndWhile
 
  If endBrake = "on" Then
    Motor.Stop("BC", "True")
  Else
    Motor.Stop("BC", "False")
  EndIf
 
EndFunction

Function reverseSpinDegrees(in number Vmax, in string side, in number circleDegrees, in string acceleration, in string deceleration, in string endBrake)
  ' ----------
  V0 = @speed_0
  ' ----------
  errorOld = 0
  exitCondition = 1
  diam = 17.7
  if ( side = "right" ) Then
    diam = 17.5
  EndIf
  ' ----------
  encoder = circleDegrees * 2 * diam / @wheel_diameter
  accelerationEncoder = 100
  If 0.1 * encoder < accelerationEncoder Then
    accelerationEncoder = 0.1 * encoder
  EndIf
  decelerationEncoder = 200
  If 0.2 * encoder < decelerationEncoder Then
    decelerationEncoder = 0.2 * encoder
  EndIf
 
  Motor.ResetCount("BC")
 
  While exitCondition = 1
   
    r1 = Motor.GetCount("B")
    r2 = Motor.GetCount("C")
   
    ' r1 is the left engine, and r2 is the right engine
   
    If side = "right" Then
      currentEncoder = Math.Abs(r2)
    Else
      currentEncoder = Math.Abs(r1)
    EndIf
   
    If currentEncoder < accelerationEncoder Then
      If acceleration = "on" Then
        V = (currentEncoder / accelerationEncoder) * (Vmax - V0) + V0
        V = Math.Abs(V)
        'multiplier increases as the robot gets closer to the acceleration quota
      Else
        V = Vmax  
      EndIf
    EndIf
    If encoder - currentEncoder < decelerationEncoder Then
      If deceleration = "on" Then
        V = ((encoder - currentEncoder) / decelerationEncoder) * (Vmax - V0) + V0
        V = Math.Abs(V)
        'multiplier decreases as the robot gets closer to the deceleration quota
      Else
        V = Vmax
      EndIf
    EndIf
   
    If side = "right" Then
      Motor.StartPower("C", V * -1)
    Else
      Motor.StartPower("B", V)
    EndIf

    If currentEncoder > encoder Then
      exitCondition = 0
    EndIf
  EndWhile
 
  If endBrake = "on" Then
    Motor.Stop("BC", "True")
  Else  
    Motor.Stop("BC", "False")
  EndIf
EndFunction

Function stangadreata(in number cm, in number v, in string sens)
  
  robot_diameter = 17.25
  decc = "off"
  if v > 0 Then
    decc  = "on"
  EndIf
  
  gr = Math.ArcCos((1 - (cm / robot_diameter))) * (robot_diameter / @wheel_diameter) * (180 / Math.Pi)
  MotorDegToCircleDeg(gr,codex)
  if sens = "left" Then
    spinDegrees(v, "right",codex, "off", decc, "on")
    Program.Delay(100)
    spinDegrees(v, "left",codex, "off", decc, "on")
    Program.Delay(100)

  Else
    spinDegrees(v, "left",codex, "off", decc, "on")
    Program.Delay(100)
    spinDegrees(v, "right",codex, "off", decc, "on")
    Program.Delay(100)
  EndIf
  
EndFunction

Function StraightAlley(in number speed)
  MoveTillWhite(speed,"false")
  MoveTillBlack(speed,"false")
  MoveSyncAcc(@speed_movesync,0.5,"on", "on", "on") '--------------------------

EndFunction

Function GayAlley(in number speed)
  MoveTillWhite(speed,"false")
  MoveTillBlack(speed,"false")
  MoveSyncAcc(70, 3, "on", "on", "on") '----------------------------
EndFunction

Function ReactiveBreakingPerversaDeStangaStraightAlley(in number vit)
  port[0] = "C"
  port[1] = "B"
  
  side = 0
  mult = 1
  enc = 0
  Time.Reset5()
  timer = Time.Get5()
  
  while timer < 200
    Motor.StartPower(port[1 - side], vit * mult)
    Motor.StartPower(port[side], vit * mult)
    timer = Time.Get5()
  EndWhile
  Motor.Stop(port[1 - side], "True")
  
  'Motor.Stop("BC", "True")
  'Program.Delay(1000)
  
  Motor.ResetCount(port[side])
  while enc < 150
    Motor.StartPower(port[side], vit * mult)
    enc = Motor.GetCount(port[side])
  EndWhile
  
  'Motor.Stop("BC", "True")
  'Program.Delay(1000)
  
  Sensor.SetMode(2-side, 0)
  s2 = Sensor.ReadPercent(2-side)
  while s2 < @grey
    Motor.StartPower(port[2-side], vit * mult)
    s2 = Sensor.ReadPercent(2-side)
  EndWhile
  
  Sensor.SetMode(side, 0)
  s1 = Sensor.ReadPercent(side)
  while s1 > @grey
    Motor.StartPower(port[side], vit * mult)
    s1 = Sensor.ReadPercent(side)
  EndWhile
  
  'Motor.Stop("BC", "True")
  'Program.Delay(1000)
 
  'Sensor.SetMode(side + 1, 0)
  's1 = Sensor.ReadPercent(side + 1)
  'while s1 > @grey
    'Motor.StartPower(port[side], vit * mult)
    's1 = Sensor.ReadPercent(side + 1)
  'EndWhile 
  
  'Motor.Stop("BC", "True")
  'Program.Delay(1000)
  
EndFunction

Function ReactiveBreakingPerversaDeDreaptaStraightAlley(in number vit)
  port[0] = "C"
  port[1] = "B"
  side = 1
  mult = -1
  enc = 0
  Time.Reset5()
  timer = Time.Get5()
  
  while timer < 100 
    Motor.StartPower(port[1 - side], vit * mult)
    Motor.StartPower(port[side], vit * mult)
    timer = Time.Get5()
  EndWhile
  Motor.Stop(port[1 - side], "True")
 
  while enc * mult < 300
    Motor.StartPower(port[side], vit * mult)
    enc = Motor.GetCount(port[side])
  EndWhile
  
  
  Sensor.SetMode(2 - side, 0)
  s2 = Sensor.ReadPercent(2 - side)
  while s2 < @grey
    Motor.StartPower(port[side], vit * mult)
    s2 = Sensor.ReadPercent(2 - side)
  EndWhile
 
  
  'Sensor.SetMode(2 - side, 0)
  's2 = Sensor.ReadPercent(2 - side)
  'while s2 > @grey
    'Motor.StartPower(port[side], vit * mult)
    's2 = Sensor.ReadPercent(2 - side)
  'EndWhile
  
  
  'Sensor.SetMode(side + 1, 0)
  's1 = Sensor.ReadPercent(side + 1)
  'while s1 < @grey
    'Motor.StartPower(port[side], vit * mult)
    's1 = Sensor.ReadPercent(side + 1)
  'EndWhile 
  
  Sensor.SetMode(side + 1, 0)
  s1 = Sensor.ReadPercent(side + 1)
  while s1 > @grey
    Motor.StartPower(port[side], vit * mult)
    s1 = Sensor.ReadPercent(side + 1)
  EndWhile 
  'Motor.Stop("BC", "True")
EndFunction

Function ReactiveBreakingIntersectionCuburi(in number vit)
  port[0] = "C"
  port[1] = "B"
  
  side = 0
  mult = 1
  
  enc = 0
  Time.Reset5()
  timer = Time.Get5()
  
  while timer < 100
    Motor.StartPower(port[1 - side], vit * mult)
    Motor.StartPower(port[side], vit * mult)
    timer = Time.Get5()
  EndWhile
  
  Motor.Stop(port[1 - side], "True")
  while enc < 300
    Motor.StartPower(port[side], vit * mult)
    enc = Motor.GetCount(port[side])
  EndWhile
  
  Sensor.SetMode(2 - side, 0)
  s2 = Sensor.ReadPercent(2 - side)
  while s2 > @grey
    Motor.StartPower(port[side], vit * mult)
    s2 = Sensor.ReadPercent(2 - side)
  EndWhile

EndFunction

Function ReactiveBreakingIntersectionStanga(in number vit)
  port[0] = "C"
  port[1] = "B"
  
  side = 0
  mult = 1
  
  enc = 0
  Time.Reset5()
  timer = Time.Get5()
  
  while timer < 10 
    Motor.StartPower(port[1 - side], vit * mult)
    Motor.StartPower(port[side], vit * mult)
    timer = Time.Get5()
  EndWhile
  
  Motor.Stop(port[1 - side], "True")
  while enc * mult < 300
    Motor.StartPower(port[side], vit * mult)
    enc = Motor.GetCount(port[side])
  EndWhile
  
  Sensor.SetMode(2 - side, 0)
  s2 = Sensor.ReadPercent(2 - side)
  while s2 < @grey
    Motor.StartPower(port[side], vit * mult)
    s2 = Sensor.ReadPercent(2 - side)
  EndWhile
  
  
  Sensor.SetMode(side + 1, 0)
  s1 = Sensor.ReadPercent(side + 1)
  while s1 > @grey
    Motor.StartPower(port[side], vit * mult)
    s1 = Sensor.ReadPercent(side + 1)
  EndWhile
EndFunction

Function ReactiveBreakingIntersectionDreapta(in number vit)
  port[0] = "C"
  port[1] = "B"
  side = 1
  mult = -1
  enc = 0
  Time.Reset5()
  timer = Time.Get5()
  
  while timer < 10 
    Motor.StartPower(port[1 - side], vit * mult)
    Motor.StartPower(port[side], vit * mult)
    timer = Time.Get5()
  EndWhile
  Motor.Stop(port[1 - side], "True")
 
  while enc * mult < 150
    Motor.StartPower(port[side], vit * mult)
    enc = Motor.GetCount(port[side])
  EndWhile
  
  
  Sensor.SetMode(2 - side, 0)
  s2 = Sensor.ReadPercent(2 - side)
  while s2 < @grey
    Motor.StartPower(port[side], vit * mult)
    s2 = Sensor.ReadPercent(2 - side)
  EndWhile
 
  
  'Sensor.SetMode(2 - side, 0)
  's2 = Sensor.ReadPercent(2 - side)
  'while s2 > @grey
    'Motor.StartPower(port[side], vit * mult)
    's2 = Sensor.ReadPercent(2 - side)
  'EndWhile
  
  
  'Sensor.SetMode(side + 1, 0)
  's1 = Sensor.ReadPercent(side + 1)
  'while s1 < @grey
    'Motor.StartPower(port[side], vit * mult)
    's1 = Sensor.ReadPercent(side + 1)
  'EndWhile 
  
  Sensor.SetMode(side + 1, 0)
  s1 = Sensor.ReadPercent(side + 1)
  while s1 > @grey
    Motor.StartPower(port[side], vit * mult)
    s1 = Sensor.ReadPercent(side + 1)
  EndWhile 
  'Motor.Stop("BC", "True")
EndFunction

Function MoveSyncPtArcMove(in number speedLeft, in number speedRight,in number encoder,in string acceleration,in string deceleration,in string end_brake)
  
  exit_condition = 1
  Motor.ResetCount(@stop_motor)
  left_encoder = 0
  right_encoder = 0
  
  While exit_condition = 1
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    
    If acceleration = "on" Then
      speedL=(-left_encoder / @acceleration_encoder) * (speedLeft - @speed_0) + @speed_0
      speedR=(right_encoder / @acceleration_encoder) * (speedRight - @speed_0) + @speed_0
      If speedL > speedLeft Then
        speedL = speedLeft
      EndIf
      If speedR > speedRight Then
        speedR = speedRight
      EndIf
    Else  
      speedL = speedLeft
      speedR = speedRight
    EndIf
    If deceleration = "on" Then
      if (encoder + left_encoder) <= @deceleration_encoder Then
        speedL = ((encoder + left_encoder) / @deceleration_encoder) * (speedLeft - @speed_0) + @speed_0
        If speedL < @speed_0 Then
          speedL = @speed_0
        EndIf
      EndIf
      if (encoder - right_encoder) <= @deceleration_encoder Then
        speedR = ((encoder - right_encoder) / @deceleration_encoder) * (speedRight - @speed_0) + @speed_0
        If speedR < @speed_0 Then
          speedR = @speed_0
        EndIf
      EndIf
    EndIf
    
    Motor.StartPower(@left_motor,-speedL)
    Motor.StartPower(@right_motor,speedR)
    
    If -left_encoder > encoder Or right_encoder > encoder Then
      exit_condition = 0
    EndIf
  EndWhile
  
  Motor.Stop("BC","True")
  
  if right_encoder < encoder Then
    Speaker.Note(50, "C5", 1000)
  EndIf
  
  'while -left_encoder < encoder
    'left_encoder = Motor.GetCount(@left_motor)
    'If acceleration = "on" Then
      'speedL=(-left_encoder / @acceleration_encoder) * (speedLeft - @speed_0) + @speed_0
      'If speedL > speedLeft Then
        'speedL = speedLeft
      'EndIf
    'Else  
      'speedL = speedLeft
    'EndIf
    'If deceleration = "on" Then
      'if (encoder + left_encoder) <= @deceleration_encoder Then
        'speedL = ((encoder + left_encoder) / @deceleration_encoder) * (speedLeft - @speed_0) + @speed_0
        'If speedL < @speed_0 Then
          'speedL = @speed_0
        'EndIf
      'EndIf
    'EndIf
    'Motor.StartPower(@left_motor,-speedL)
  'EndWhile
  
  while right_encoder < encoder
    right_encoder = Motor.GetCount(@right_motor)
    If acceleration = "on" Then
      speedR=(right_encoder / @acceleration_encoder) * (speedRight - @speed_0) + @speed_0
      If speedR > speedRight Then
        speedR = speedRight
      EndIf
    Else  
      speedR = speedRight
    EndIf
    If deceleration = "on" Then
      if (encoder - right_encoder) <= @deceleration_encoder Then
        speedR = ((encoder - right_encoder) / @deceleration_encoder) * (speedRight - @speed_0) + @speed_0
        If speedR < @speed_0 Then
          speedR = @speed_0
        EndIf
      EndIf
    EndIf
    Motor.StartPower(@right_motor,speedR)
  EndWhile
  
  If end_brake = "on" Then
    Motor.Stop("BC","True")
  EndIf
EndFunction

Function ArcMove(in number radius, in number degrees, in number speed, in string direction)
  encoder = 2 * (radius + @robot_diameter / 2) / @wheel_diameter * degrees
  
  if(direction = "right")Then
    speedLeft = speed * -1
    speedRight = speed * (radius - @robot_diameter / 2) / (radius + @robot_diameter / 2)
  Else
    speedRight = speed 
    speedLeft = -1 * speed * (radius - @robot_diameter / 2) / (radius + @robot_diameter / 2)
  EndIf      
  
  Motor.MoveSync("BC", speedLeft, speedRight, encoder, "on")
  
EndFunction  


'/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
'-------------------------------------------------------*FUNCTIILE_DE_TIP_"SUBRUTINA"*----------------------------------------------------
'/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


sub checkpoint
  lf_cm_cu_cub(@speed_lf,16,"off","off","on")
  RobotSpin("right",4, @speed_spin, "on", "on", "on") 'ma pozitionez cand las cuburile pe small ship sa nu fac buba
  @kpD = 0.8
  @degD = 140
  wait_claw()
  @kpA = 0.5
  @degA = 130 'mission accomplished
  wait_claw()
  @kpD = 1
  @degD = 90
  wait_claw()
  RobotSpin("right",4, @speed_spin, "on", "on", "on")
  @degA = 0
  @kpD = 0.2
  @degD = 300
  wait_claw()
  wait_claw()
  wait_claw()
  closeClawForSpeciala()
  wait_claw()
  @kpD = 1
  @degD = 140
  ArcMove(12, 90, -100, "right") 'terminam arcu inainte de intersectia cu nava mica
  lf_cm_cu_cub(70,10, "off","off","on")
  @degA = 0
  wait_claw_specific(100)
  @kpD = 1
  @degD = 90
  lf_cm_cu_cub(80,30, "off","off","off")
  lf_intersection(80, "off", "on", "on")
  reverseMoveSyncCM(7, @speed_movesync, "off", "off", "on")
  RobotSpin("left",140, @speed_spin, "off", "on", "on") 'ca sa luam speciala
  @kpD = 0.8
  resetClaw()
  MoveSyncAcc(@speed_movesync,5,"on", "on", "on") '--------------------------
  @kpD = 0.6
  @degD = 160
  wait_claw_specific(250)
  closeClawForSpeciala() 'am luat speciala
  @kpD = 5
  @degD = 100
  reverseMoveSyncCM(7, @speed_movesync + 30, "off", "off", "on")
  RobotSpin("right",135, @speed_spin, "off", "on", "off") 'inapoi pe linie
  lf_cm(80,10,"on","off","off")
  lf_intersection(80, "off", "off", "on")
  MoveSyncAcc(50,15,"on", "on", "on") '----------------------------
  reverseMoveSyncCM(6, @speed_movesync, "off", "off", "on")
  RobotSpin("right",90, @speed_spin, "on", "on", "on")
  'PerfectLine(30, "right") 'cu fata catre crane
  @kpD = 4
  @degD = 138 'punem gheara la unghiu bun
  lf_cm(@speed_lf,15,"on","off","off") 'activam punem speciala
  @degA = 0
  @degD = 0
  lf_cm(@speed_lf,10,"off","off","on") 'activam craneu
  Time.Reset7()
  While(Time.Get7() < 250)
    Motor.StartSync("BC", -60, 60)
  EndWhile
  reverseMoveSyncCM(10, 30, "off", "off", "off")
  ArcMove(22, 90, -70, "right")
  RobotSpin("left",170, @speed_spin, "on", "on", "on") 'sunt pe linie
  PerfectLine(30, "left") 
   'termin arcmoveu pe linie dupa intersectie
  lf_cm(80,70,"on","off","off")
  lowerLift()
  lf_intersection(80, "off", "on", "on")
  closeClaw() 'iau alba
  raiseLift()
  lf_cm(80,13,"off","off","off")
  lf_intersection(80, "off", "on", "on")
  RobotSpin("right",90, @speed_spin, "on", "on", "on") 'cu fata la nava mare
  
  MoveSyncAcc(@speed_movesync,5,"on", "on", "on") '--------------------
  
  ultimaSecventa()
EndSub

Sub ultimaSecventa
  @kpD = 1
  @degD = 140 'am pus alba pe nava mare
  wait_claw()
  resetClaw()
  'wait_claw_specific(200)
  lowerLiftToBigShip() 'apuc nava mare
  closeClawForSpeciala() 'am apucat-o
  @kpD = 1
  @degD = 135
  reverseMoveSyncCM(7, @speed_movesync + 10, "off", "off", "on")
  RobotSpin("right",90, 70, "off", "off", "off")
  Program.Delay(200)
  lf_cm(80, 20,"off","off","on")
  @degA = 0
  @degD = 0
  lf_cm_cu_nava(80, 60,"on","off","off")
  
  'RobotSpin("left",10, @speed_spin, "on", "on", "on") 'ne pozitionam catre stanga ca sa intram in box
  
  @kpD = 1  
  @degD = 140
  'wait_claw_specific(1)
  'Motor.MoveSync("BC", -60, 100, 400, "True") 'facem un fel de arc ca sa intram in box
  Motor.MoveSync("BC", -30, 60, 600, "True")
  LCD.Clear()
  LCD.Write(20,20,Time.Get3())
EndSub

Sub Claw
  'A motor mediu de prindere
  'D motor mare de invartir
  error_oldA = 0
  @kpA = 0.2
  @kdA = 0.4
  error_oldD = 0
  @kpD = 1
  @kdD = 10
  @degA = 0
  @degD = 0
  Motor.ResetCount("DA")
  While(1 = 1)
    if Buttons.Current = "U" Then
      resetClaw()
    EndIf
    encoder = Motor.GetCount("A")
    error = degA - encoder
    err1 = degA - encoder
    @auxA = encoder
    PA = error * kpA
    DA = (error - error_oldA) * kdA
    error_oldA = error
    Motor.StartPower("A",PA + DA)
    encoder = Motor.GetCount("D")
    error = degD - encoder
    err2 = degD - encoder
    @auxD = encoder
    PD = error * kpD
    DD = (error - error_oldD) * kdD
    error_oldD = error
    Motor.StartPower("D",PD + DD)
    if(err1 < 10 And err1 > -10 And err2 < 10 And err2 > -10 )Then
      @stegulet_pervers = 0
    EndIf
    if((degD > 170 AND @auxD > 170 ) OR (degA > 170 And @auxA > 170 ))Then
      @stegulet_pervers = 0
    EndIf    
  EndWhile
EndSub

sub closeFor2Cubes
  kpA = 0.2
  @degA = 300
  degD  = 200
  wait_claw_specific(300)
  degD  = 165
  degA = 140
  wait_claw()
  @kpA = 0.3
  @degA = 500
  wait_claw_specific(300)
EndSub

Sub wait_claw
  Time.Reset1()
  @stegulet_pervers = 1
  While Time.Get1() < @TimeBetween' And @stegulet_pervers = 1
    
  EndWhile
EndSub

Function wait_claw_specific(in number timp)
  Time.Reset1()
  While Time.Get1() < timp
    
  EndWhile
EndFunction

Sub wait_claw_but_slower
  Time.Reset1()
  @stegulet_pervers = 1
  While Time.Get1() < @TimeBetween
    
  EndWhile
EndSub

sub prepForTwoCubes
  @degA = 130
  wait_claw()
  wait_claw()
  wait_claw()
EndSub

sub raiseLift
  @kpD = 5
  @degD = 120
  wait_claw()
EndSub

sub raiseLiftLittle
  @kpD = 5
  @degD = 145
  wait_claw()
EndSub

sub raiseLiftalittle
  @kpD = 5
  @degD = @auxD-10
  wait_claw()
EndSub

sub aslowaspossible
  @kpD = 0.3
  @degD = 200
  wait_claw()
  wait_claw()
EndSub

sub raiseLiftsuper
  @kpD = 20
  @degD = 100
  wait_claw()
EndSub

Sub lowerLift
  @kpD = 0.6
  @degD = 160'se coboara la unghiul optim ca sa luam cuburile
  wait_claw()
EndSub

Sub lowerLiftslow
  @kpD = 0.4
 @degA = 90
  wait_claw()
  wait_claw()
  wait_claw()
EndSub

Sub lowerLiftsLowAndLower
  @kpD = 0.6
  @degD = 200
  wait_claw()

EndSub

sub lowerLiftFor2Cubes
  @kpD = 0.6
  @degD = 160 '175 '300
  wait_claw()
  wait_claw()
EndSub

Sub lowerLiftSpecialCube
  @kpD = 0.6
  @degD = 153
  wait_claw()
EndSub

Sub lowerLiftSpecialCubePut
  @kpD = 0.8
  @degD = 125 'se coboara(*urca acum ca suntem smecheri) la unghiul optim ca sa punem speciala
  wait_claw()
EndSub

sub lowerLiftToLittleShip
  @kpD = 0.4
  @degD = 190
  wait_claw()
  wait_claw()
  wait_claw()

EndSub

sub lowerLiftToBigShip
  @kpD = 0.6 '0.6
  @degD = 200 '167
  wait_claw()
  wait_claw()
EndSub

sub destroyFlagLittleShipOne
  @kpD = 0.5
  @degD = 110
  wait_claw()
  wait_claw()  
  'wait_claw()  
  'wait_claw()   
EndSub

sub destroyFlagLittleShipTwo
  @kpD = 1
  @degD = 143
  '@degA = 80
  wait_claw()  
  wait_claw()  
  wait_claw()  
  'wait_claw()  
  'wait_claw()  
  'RobotSpin("right",30 ,100, "off", "off", "off")
  'RobotSpin("left",30 ,100, "off", "off", "on")  
EndSub

sub resetLift
  @kpD = 0.5
  @degD = 0
  wait_claw()
EndSub

Sub prepLowerLiftSpecialCube
  @degA = -120
  wait_claw()
EndSub

Sub closeClaw
  @kpA = 0.2
  @degA = 400
  wait_claw() 
EndSub

Sub closeClawForSpeciala
  @kpA = 0.5 '5
  @kdA = 10
  @degA = 400
  wait_claw() 
  @kdA = 0.1
EndSub

sub resetArm
  @degA = 0
  @degD = 10
  wait_claw()
EndSub

sub resetClaw
  @kpA = 0.8
  @degA = 0
  wait_claw()
  @kpA = 0.2
EndSub

sub clawForWhite
  
  @degA = -110
  wait_claw()
  
EndSub

sub TakeTwoCubesUnderYou
  @kpD = 0.4
  @degD = 210
  wait_claw_specific(1000)
  @kdD = 10
  reverseMoveSyncCM(10, @speed_movesync - 30, "on", "on", "on")
  @kpD = 4
  @degD = 145
  wait_claw_specific(100)
  @kpA = 5
  @degA = 30
  wait_claw_specific(100)
  
  @degD = 170
  wait_claw_specific(400)
  
  @kpA = 5
  @degA = 250
  wait_claw_specific(300)
  raiseLift()  
EndSub

sub TakecubeUnderYou
  @kpD = 0.6
  @kdD = 50
  @kpA = 5
  @degA = 190
  @degD = 220
  wait_claw_specific(1000)
  @kdD = 10

  reverseMoveSyncCM(10, @speed_movesync - 30, "on", "on", "on")
  @kpD = 4
  @degD = 145
  wait_claw_specific(100)
  @kpA = 5
  @degA = 140
  wait_claw_specific(100)
  
  @degD = 170
  wait_claw_specific(400)
  
  @kpA = 5
  @degA = 250
  wait_claw_specific(300)
  raiseLift()
EndSub

sub prepForWhite
  @degA = 140
  wait_claw()
EndSub

Sub prepForGreen1
  @degA = 150
  wait_claw()
EndSub

Sub prepForGreen
  @degA = 125
  wait_claw()
EndSub

sub letALittleMore
  @degA = 115
  wait_claw()
  wait_claw()
EndSub

sub letALittle
  @degA = 125
  wait_claw()
  wait_claw()
EndSub

sub letALittleMedium
  @kpA = 1
  @degA = 137
  wait_claw()
EndSub

sub letALot
  @degA = -80
  wait_claw()
  wait_claw()
EndSub

sub letALittleless
  @degA = 140
  wait_claw()
  wait_claw()
EndSub

sub putGreenOnShip
  @kpD = 0.6
  @degD = 140
  wait_claw()
  wait_claw()
 letALittleMedium()
EndSub

sub GreenCubeFall
  @kpD = 1
  @degD = 130
  wait_claw()
  wait_claw()
 resetClaw()
EndSub

sub putWhiteOnShip
  @kpD = 0.6
  @degD = 140
  wait_claw()
  letALittleMedium()
EndSub

sub putGreenOnSmallShip
  @kpD = 0.8
  @degD = 140
  wait_claw()
  @kpA = 1
  @degA = 145
  wait_claw()
EndSub

sub putWhiteOnSmallShip
  @kpD = 0.6
  @degD = 140
  wait_claw()
  wait_claw()
  letALittle()
EndSub


'/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
'-------------------------------------------------*FUNCTIILE_"ð‘´ð’‚ð’ð’„ð’‚ ð’Žð’Š ð’‚ð’Š ð’—ð’“ð’†ð’‹ð’– ð’Šð’”ð’Žð’‚ð’ð’‚"*---------------------------------------------------
'/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
'Daca nu v-ati prins astea sunt experimentele lu George(ð•€ð•¤ð•žð•’ð•Ÿð•’ ð•¥ð•’ð•šð•– ð•¥ð•š ð•§ð•–ð•Ÿð•–ð•ð•–)

'Aici se testeaza idei in 3 rankuri:
' - Neterminat = Sintaxa functiei nu e terminata
' - Trebuie Testat = Sintaxa terminata , dar functie necalibrata si netestata fizic
' - Terminat = functie terminata si testata , trebuie aprobata de cel putin 2 membri(mama deja am dat o pe democratie esti nebun)
' - Functiile APROBATE sunt mutate cat mai repede in categoriile lor respective (in functie de tipul miscarii), adica mai sus
' - Functiile NEAPROBATE sunt pastrate aici pentru reciclare , second opinion sau alte experimente
'ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€ðŸ’€
' !!! Fie functiile aprobate , neaprobate sau inca in faza de cooking , stadiul functiei si o scurta descriere a acesteia trebuie prezente permanent !!!



'Line followerul ala smeker de-l promit de nush cate saptamani(TREBUIE TESTAT)
Function lf_cm_SP(in number speed_max,in number cm,in string acceleration,in string deceleration,in string end_brake)
  
  'If the system oscillates too much, reduce the P gain.
  'If the system takes too long to settle, increase the I gain.
  'If the system overshoots the setpoint, adjust the D gain. Ou mai gaud what an inglishmen
  
  exit_condition = 1
  Motor.ResetCount(@stop_motor)
  Sensor.SetMode(1,0)
  Sensor.SetMode(2,0)
  left_encoder = 0
  right_encoder = 0
  Cm2Degrees(cm,encoder)
  error_old = 0
  isumC = 0
  isumF = 0
  isum = 0
  flag = 1
  While exit_condition = 1
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    left_encoder=left_encoder*-1
    current_encoder = (left_encoder + right_encoder) / 2
    s1 = Sensor.ReadPercent(1)
    s2 = Sensor.ReadPercent(2)
    error = s1 - s2
    If acceleration = "on" Then
      speed=(current_encoder / @acceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed > speed_max Then
        speed = speed_max
      EndIf
    Else  
      speed = speed_max
    EndIf
    If deceleration = "on" And (encoder - current_encoder) <= @deceleration_encoder Then
      speed = ((encoder - current_encoder) / @deceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed < @speed_0 Then
        speed = @speed_0
      EndIf
    EndIf
    if error < -15 or error > 15 Then
      exp = error / 100
      kplf = @kpSensorC * exp 
      kdlf = @kdSensorC * exp 
      kilf = @kiSensorC * exp
      isumC = isumC + error
      isum= isumC
    Else
      kplf = @kpSensorF
      kdlf = @kdSensorF
      kilf = @kiSensorF
      isumF = isumF + error
      isum= isumC
    EndIf
    P = kplf * error
    D = kdlf * (error - error_old)
    I = kilf * isum
    Motor.StartPower(@left_motor,-(speed + (P + D)))
    Motor.StartPower(@right_motor,(speed - (P + D)))
    error_old = error
    If current_encoder > encoder Then
      exit_condition = 0
    EndIf
  EndWhile
  If end_brake = "on" Then
    Motor.Stop("BC","True")
  EndIf
EndFunction

'Aceeasi smekerie de la line follower doar ca pe movesync(TREBUIE TESTAT)
Function MoveSync_SP(in number speed_max,in number cm,in string acceleration,in string deceleration,in string end_brake)
  exit_condition = 1
  Motor.ResetCount(@stop_motor)
  left_encoder = 0
  right_encoder = 0
  Cm2Degrees(cm,encoder)
  error_old = 0
  isumC = 0
  isumF = 0
  isum = 0
  flag = 1
  While exit_condition = 1
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    current_encoder = ((-1*left_encoder) + right_encoder) / 2
    error =  left_encoder + right_encoder
    If acceleration = "on" Then
      speed=(current_encoder / @acceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed > speed_max Then
        speed = speed_max
      EndIf
    Else  
      speed = speed_max
    EndIf
    If deceleration = "on" And (encoder - current_encoder) <= @deceleration_encoder Then
      speed = ((encoder - current_encoder) / @deceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed < @speed_0 Then
        speed = @speed_0
      EndIf
    EndIf
    if  error < -20 or error > 20  Then
      exp = error / 100
      kpms = @kpMotorC * exp
      kdms = @kdMotorC * exp
      kims = @kiMotorC * exp
      isumC = isumC + error
      isum= isumC
    Else
      kpms = @kpMotorF
      kdms = @kdMotorF
      kims = @kiMotorF
      isumF = isumF + error
      isum= isumC
    EndIf
    P = kpms * error
    D = kdms * (error - error_old)
    I = kims * isum
    Motor.StartPower(@left_motor,-(speed + (P + D + I)))
    Motor.StartPower(@right_motor,(speed - (P + D + I)))
    error_old = error
    If current_encoder > encoder Then
      exit_condition = 0
    EndIf
  EndWhile
  If end_brake = "on" Then
    Motor.Stop("BC","True")
  EndIf
EndFunction

'movesync doar ca pe timp(TREBUIE TESTAT)
Function MoveSyncTime_SP(in number speed_max,in number seconds,in string acceleration,in string deceleration,in string end_brake)
  exit_condition = 1
  Motor.ResetCount(@stop_motor)
  left_encoder = 0
  right_encoder = 0
  error_old = 0
  isumC = 0
  isumF = 0
  isum = 0
  flag = 1
  Time.Reset5()
  While exit_condition = 1
    time = Time.Get5()
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    current_encoder = ((-1*left_encoder) + right_encoder) / 2
    error =  left_encoder + right_encoder
    If acceleration = "on" Then
      speed=(current_encoder / @acceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed > speed_max Then
        speed = speed_max
      EndIf
    Else  
      speed = speed_max
    EndIf
    If deceleration = "on" And (encoder - current_encoder) <= @deceleration_encoder Then
      speed = ((encoder - current_encoder) / @deceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed < @speed_0 Then
        speed = @speed_0
      EndIf
    EndIf
    if  error < -20 or error > 20  Then
      exp = error / 100
      kpms = @kpMotorC * exp
      kdms = @kdMotorC * exp
      kims = @kiMotorC * exp
      isumC = isumC + error
      isum= isumC
    Else
      kpms = @kpMotorF
      kdms = @kdMotorF
      kims = @kiMotorF
      isumF = isumF + error
      isum= isumC
    EndIf
    P = kpms * error
    D = kdms * (error - error_old)
    I = kims * isum
    Motor.StartPower(@left_motor,-(speed + (P + D + I)))
    Motor.StartPower(@right_motor,(speed - (P + D + I)))
    error_old = error
    If time / 1000 > seconds Then
      exit_condition = 0
    EndIf
  EndWhile
  If end_brake = "on" Then
    Motor.Stop("BC","True")
  EndIf
EndFunction

'reverse-movesync doar ca pe timp(TREBUIE TESTAT)
Function ReverseMoveSyncTime_SP(in number speed_max,in number seconds,in string acceleration,in string deceleration,in string end_brake)
  exit_condition = 1
  Motor.ResetCount(@stop_motor)
  left_encoder = 0
  right_encoder = 0
  error_old = 0
  isumC = 0
  isumF = 0
  isum = 0
  flag = 1
  Time.Reset5()
  While exit_condition = 1
    time = Time.Get5()
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    current_encoder = ((-1*left_encoder) + right_encoder) / 2
    error =  left_encoder + right_encoder
    If acceleration = "on" Then
      speed=(current_encoder / @acceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed > speed_max Then
        speed = speed_max
      EndIf
    Else  
      speed = speed_max
    EndIf
    If deceleration = "on" And (encoder - current_encoder) <= @deceleration_encoder Then
      speed = ((encoder - current_encoder) / @deceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed < @speed_0 Then
        speed = @speed_0
      EndIf
    EndIf
    if  error < -20 or error > 20  Then
      exp = error / 100
      kpms = @kpMotorC * exp
      kdms = @kdMotorC * exp
      kims = @kiMotorC * exp
      isumC = isumC + error
      isum= isumC
    Else
      kpms = @kpMotorF
      kdms = @kdMotorF
      kims = @kiMotorF
      isumF = isumF + error
      isum= isumC
    EndIf
    P = kpms * error
    D = kdms * (error - error_old)
    I = kims * isum
    Motor.StartPower(@left_motor,(speed + (P + D + I)))
    Motor.StartPower(@right_motor,-(speed - (P + D + I)))
    error_old = error
    If time / 1000 > seconds Then
      exit_condition = 0
    EndIf
  EndWhile
  If end_brake = "on" Then
    Motor.Stop("BC","True")
  EndIf
EndFunction

'line followerul doar ca pe timp(TREBUIE TESTAT)
Function lf_time_SP(in number speed_max,in number seconds,in string acceleration,in string deceleration,in string end_brake)
  
  'astea de jos sunt pentru calibrari , nu uita ca ai doua seturi de k , pentru calibrare si pentru fine-tunning
  'If the system oscillates too much, reduce the P gain.
  'If the system takes too long to settle, increase the I gain.
  'If the system overshoots the setpoint, adjust the D gain.
  
  exit_condition = 1
  Sensor.SetMode(1,0)
  Sensor.SetMode(2,0)
  left_encoder = 0
  right_encoder = 0
  error_old = 0
  isumC = 0
  isumF = 0
  isum = 0
  flag = 1
  Time.Reset5()
  While exit_condition = 1
    time = Time.Get5()
    left_encoder = Motor.GetCount(@left_motor)
    right_encoder = Motor.GetCount(@right_motor)
    left_encoder=left_encoder*-1
    current_encoder = (left_encoder + right_encoder) / 2
    s1 = Sensor.ReadPercent(1)
    s2 = Sensor.ReadPercent(2)
    error = s1 - s2
    If acceleration = "on" Then
      speed=(current_encoder / @acceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed > speed_max Then
        speed = speed_max
      EndIf
    Else  
      speed = speed_max
    EndIf
    If deceleration = "on" And (encoder - current_encoder) <= @deceleration_encoder Then
      speed = ((encoder - current_encoder) / @deceleration_encoder) * (speed_max - @speed_0) + @speed_0
      If speed < @speed_0 Then
        speed = @speed_0
      EndIf
    EndIf
    if error < -15 or error > 15 Then
      exp = error / 100
      kplf = @kpSensorC * exp 
      kdlf = @kdSensorC * exp 
      kilf = @kiSensorC * exp
      isumC = isumC + error
      isum= isumC
    Else
      kplf = @kpSensorF
      kdlf = @kdSensorF
      kilf = @kiSensorF
      isumF = isumF + error
      isum= isumC
    EndIf
    P = kplf * error
    D = kdlf * (error - error_old)
    I = kilf * isum
    Motor.StartPower(@left_motor,-(speed + (P + D)))
    Motor.StartPower(@right_motor,(speed - (P + D)))
    error_old = error
    If time / 1000 > seconds Then
      exit_condition = 0
    EndIf
  EndWhile
  If end_brake = "on" Then
    Motor.Stop("BC","True")
  EndIf
EndFunction

'robotspin cu smekeria de la lf(NETERMINAT)
Function RobotSpin_SP(in string direction,in number degrees,in number speed,in string acceleration, in string deceleration, in string end_brake)  
  kp = 0.5
  kd = @kd
  ki = 0.01
  V0 = @speed_0
  if direction = "left" Then
    side = 1
  else 
    side = -1
  EndIf
  
  'left is side = 1 and right is side = -1
  '------

  '------
  errorOld = 0
  '------
  diamAx = @robot_diameter
  diamRoata = @wheel_diameter
  circleDegToMotorDegForRotation(degrees, encoder)
  
  
  accelerationEncoder = 100
  If 0.1 * encoder < accelerationEncoder Then
    accelerationEncoder = 0.1 * encoder
  EndIf
  decelerationEncoder = 250
  If 0.25 * encoder < decelerationEncoder Then
    decelerationEncoder = 0.25 * encoder
  EndIf
  
  Motor.ResetCount("BC")
  
  exit = 0
  err_sum = 0
  While exit <> 1
   
    r1 = Motor.GetCount("B")
    r2 = Motor.GetCount("C")
   
    currentEncoder = (Math.Abs(r1) + Math.Abs(r2)) / 2
    'r1 is the left engine, and r2 is the right engine
    error = Math.Abs(r2) - Math.Abs(r1)
    P = kp * error
    D = kd * (error - errorOld)
    I = ki * err_sum
    errorOld = error
    err_sum = err_sum + error
    
    LCD.Clear()
    LCD.Text(0, 1, 1, 2, currentEncoder)
    LCD.Update()
    
    V = speed
    If acceleration = "on" AND  currentEncoder < accelerationEncoder Then
      V = (currentEncoder / accelerationEncoder) * (speed - V0) + V0
      If V > speed Then
        V = speed
      EndIf
    EndIf
    If deceleration = "on" Then 
      If currentEncoder >= encoder - decelerationEncoder Then
        'Speaker.Tone(70, 5000, 100)
        V = ((encoder - currentEncoder) / decelerationEncoder) * (speed - V0) + V0
        If V < V0 Then
          V = V0
        EndIf
      EndIf
    EndIf  
    
    
    motorB = V + (P + D + I)
    motorC = V - (P + D + I)
    
    If exit <> 1 Then
      Motor.StartPower( "B", motorB * side )
      Motor.StartPower( "C", motorC * side )
    EndIf
    
    'errorLast = error
    If currentEncoder >= encoder Then
      exit = 1
    EndIf
   
  EndWhile
 
  If end_brake = "on" Then
    
    Motor.Stop("BC", "True")
    
  Else  
    
    Motor.Stop("BC", "False")
    
  EndIf
  
  'Program.Delay(200)
 
EndFunction


'Copyright C&P Nerdvana_Triangulum . ALL RIGHTS RESERVED . UNAUTHORIZED USE OR REPLICATION WILL BE PUNISHED ACCORDINGLY BY "TUTZAN-UL"